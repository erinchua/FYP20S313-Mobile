{"ast":null,"code":"import _slicedToArray from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{IonCol,IonContent,IonGrid,IonHeader,IonLabel,IonPage,IonRow,IonTitle}from'@ionic/react';import React,{useEffect,useState}from'react';import'../css/Global.css';import'../css/Announcements.css';import TopNav from'../components/TopNav';import{db}from'../firebase';import{toAnnouncement}from'../modules/map';import{toDateObject}from'../modules/convert';var Announcements=function Announcements(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),announcements=_useState2[0],setAnnouncements=_useState2[1];var current=announcements.filter(function(news){return new Date().getTime()>toDateObject(news.date,news.time).getTime();});useEffect(function(){db.collection('Announcements').get().then(function(_ref){var docs=_ref.docs;setAnnouncements(docs.map(toAnnouncement));});},[]);console.log(current);return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(TopNav,{title:\"Announcements\",route:\"/u/home\",backarrow:true,hamburger:true})),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true},current.length>0?current.map(function(news,index){var day=toDateObject(news.date,news.time).toDateString().split(\" \")[0];return/*#__PURE__*/React.createElement(IonGrid,{id:\"announcementGrid\",key:index},/*#__PURE__*/React.createElement(IonRow,{className:\"announcementRow\"},/*#__PURE__*/React.createElement(IonCol,{className:\"announcementColDetails\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonTitle,{id:\"announcementTitle\"},news.title)),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonLabel,{id:\"announcementDate\"},\"Posted on \",news.date,\" (\",day,\"), \",news.time)),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonLabel,{id:\"announcementDetails\"},news.details)))));}):/*#__PURE__*/React.createElement(IonGrid,{id:\"noAnnouncementGrid\"},/*#__PURE__*/React.createElement(IonRow,{id:\"noAnnouncementRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{id:\"noAnnnouncementCol\",class:\"ion-text-center\"},/*#__PURE__*/React.createElement(IonTitle,{id:\"noAnnouncementTitle\"},\"There are currently no announcements\"))))));};export default Announcements;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/pages/Announcements.tsx"],"names":["IonCol","IonContent","IonGrid","IonHeader","IonLabel","IonPage","IonRow","IonTitle","React","useEffect","useState","TopNav","db","toAnnouncement","toDateObject","Announcements","announcements","setAnnouncements","current","filter","news","Date","getTime","date","time","collection","get","then","docs","map","console","log","length","index","day","toDateString","split","title","details"],"mappings":"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","sourcesContent":["import { IonCol, IonContent, IonGrid, IonHeader, IonLabel, IonPage, IonRow, IonTitle } from '@ionic/react';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nimport '../css/Global.css';\r\nimport '../css/Announcements.css';\r\nimport TopNav from '../components/TopNav';\r\nimport { db } from '../firebase';\r\nimport { Announcement, toAnnouncement } from '../modules/map';\r\nimport { toDateObject } from '../modules/convert';\r\n\r\n\r\nconst Announcements: React.FC = () => {\r\n\r\n    const [announcements, setAnnouncements] = useState<Announcement[]>([]);\r\n\r\n    const current = announcements.filter(news => { return new Date().getTime() > toDateObject(news.date, news.time).getTime() });\r\n\r\n    useEffect(() => {\r\n        db.collection('Announcements').get().then(({ docs }) => {\r\n            setAnnouncements(docs.map(toAnnouncement));\r\n        });\r\n    }, []);\r\n\r\n    console.log(current)\r\n\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <TopNav title=\"Announcements\" route='/u/home' backarrow={true} hamburger={true} />\r\n            </IonHeader>\r\n\r\n            <IonContent fullscreen={true}>\r\n                {current.length > 0 ? (\r\n                    current.map((news, index) => {\r\n                        const day = toDateObject(news.date, news.time).toDateString().split(\" \")[0];\r\n\r\n                        return (\r\n                            <IonGrid id=\"announcementGrid\" key={index}>\r\n                                <IonRow className=\"announcementRow\">\r\n                                    <IonCol className=\"announcementColDetails\">\r\n                                        <IonRow>\r\n                                            <IonTitle id=\"announcementTitle\">{news.title}</IonTitle>\r\n                                        </IonRow>\r\n\r\n                                        <IonRow>\r\n                                            <IonLabel id=\"announcementDate\">Posted on {news.date} ({day}), {news.time}</IonLabel>\r\n                                        </IonRow>\r\n\r\n                                        <IonRow>\r\n                                            <IonLabel id=\"announcementDetails\">{news.details}</IonLabel>\r\n                                        </IonRow>\r\n                                    </IonCol>\r\n                                </IonRow>\r\n                            </IonGrid>\r\n                        )\r\n                    })) : (\r\n                        <IonGrid id=\"noAnnouncementGrid\">\r\n                            <IonRow id=\"noAnnouncementRow\" class=\"ion-align-items-center\">\r\n                                <IonCol id=\"noAnnnouncementCol\" class=\"ion-text-center\">\r\n                                    <IonTitle id=\"noAnnouncementTitle\">There are currently no announcements</IonTitle>\r\n                                </IonCol>\r\n                            </IonRow>\r\n                        </IonGrid>\r\n                    )\r\n                }\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n\r\n};\r\n\r\nexport default Announcements;"]},"metadata":{},"sourceType":"module"}