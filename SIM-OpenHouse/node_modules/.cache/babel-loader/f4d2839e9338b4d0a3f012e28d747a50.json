{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{IonButton,IonContent,IonGrid,IonItemDivider,IonLabel,IonLoading,IonModal,IonRow,IonTextarea}from'@ionic/react';import React,{useState}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faFlag}from'@fortawesome/free-solid-svg-icons';import\"../../css/Global.css\";import\"../../css/Forum.css\";import{db}from'../../firebase';import{useAuth}from'../../modules/auth';var Forum_FlagModal=function Forum_FlagModal(props){var _useAuth=useAuth(),userID=_useAuth.userID;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showFlagModal=_useState4[0],setShowFlagModal=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),reason=_useState6[0],setReason=_useState6[1];var handleReport=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var time,name,docRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);time=new Date();_context.next=5;return db.collection('Students').doc(userID).get().then(function(doc){name=doc.data().firstName+\" \"+doc.data().lastName;});case 5:docRef=db.collection('Forum').doc(userID).collection('Reports').doc(time.getTime().toString());_context.next=8;return docRef.set({id:+docRef.id,entry:reason,postId:+props.postId,postType:props.postType,postContent:props.postContent,offender:props.offender,offenderId:props.offenderId,reporter:name,reporterId:userID,dateTime:time.toLocaleString().replace(/\\//g,\"-\")});case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 13:_context.prev=13;setLoading(false);setShowFlagModal(false);setReason(\"\");return _context.finish(13);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,10,13,18]]);}));return function handleReport(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IonModal,{isOpen:showFlagModal,cssClass:\"post-question-modal\",onDidDismiss:function onDidDismiss(){return setShowFlagModal(false);}},/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonGrid,{id:\"postQns-modal-container\"},/*#__PURE__*/React.createElement(IonRow,{style:{paddingTop:'1%'}},/*#__PURE__*/React.createElement(IonLabel,{id:\"postQns-title\"},\"Report Post\")),/*#__PURE__*/React.createElement(IonItemDivider,null),/*#__PURE__*/React.createElement(IonRow,{id:\"postQns-modal-inputArea\"},/*#__PURE__*/React.createElement(IonTextarea,{value:reason,onIonChange:function onIonChange(e){return setReason(e.detail.value);},rows:11,contentEditable:true,required:true,placeholder:\"Type your reason for reporting here...\"})),/*#__PURE__*/React.createElement(IonRow,{className:\"ion-justify-content-around\"},/*#__PURE__*/React.createElement(IonButton,{id:\"postQns-close-button\",fill:\"outline\",onClick:function onClick(){return setShowFlagModal(false);}},\"CANCEL\"),/*#__PURE__*/React.createElement(IonButton,{id:\"postQns-post-button\",onClick:handleReport},\"REPORT\"))))),/*#__PURE__*/React.createElement(IonButton,{onClick:function onClick(){return setShowFlagModal(true);},id:\"forum-question-flagBtn\",size:\"small\",disabled:props.disabled},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faFlag,size:\"sm\"})),/*#__PURE__*/React.createElement(IonLoading,{isOpen:loading}));};export default Forum_FlagModal;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/components/Forum/Forum_FlagModal.tsx"],"names":["IonButton","IonContent","IonGrid","IonItemDivider","IonLabel","IonLoading","IonModal","IonRow","IonTextarea","React","useState","FontAwesomeIcon","faFlag","db","useAuth","Forum_FlagModal","props","userID","loading","setLoading","showFlagModal","setShowFlagModal","reason","setReason","handleReport","time","Date","collection","doc","get","then","name","data","firstName","lastName","docRef","getTime","toString","set","id","entry","postId","postType","postContent","offender","offenderId","reporter","reporterId","dateTime","toLocaleString","replace","console","log","paddingTop","e","detail","value","disabled"],"mappings":"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","sourcesContent":["import { IonButton, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\r\nimport React, { useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFlag } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport \"../../css/Global.css\";\r\nimport \"../../css/Forum.css\";\r\nimport { db } from '../../firebase';\r\nimport { useAuth } from '../../modules/auth';\r\n\r\nconst Forum_FlagModal: React.FC<{ disabled: boolean, postId: number, postType: string, postContent: string, offender: string, offenderId: string }> = props => {\r\n    const { userID } = useAuth();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [showFlagModal, setShowFlagModal] = useState(false);\r\n    const [reason, setReason] = useState(\"\");\r\n\r\n    const handleReport = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const time = new Date();\r\n            let name: string;\r\n\r\n            await db.collection('Students').doc(userID).get().then((doc: any) => {\r\n                name = doc.data().firstName + \" \" + doc.data().lastName;\r\n            });\r\n            \r\n            const docRef = db.collection('Forum').doc(userID).collection('Reports').doc((time.getTime()).toString());\r\n            await docRef.set({\r\n                id: +docRef.id,\r\n                entry: reason,\r\n                postId: +props.postId,\r\n                postType: props.postType,\r\n                postContent: props.postContent,\r\n                offender: props.offender,\r\n                offenderId: props.offenderId,\r\n                reporter: name!,\r\n                reporterId: userID,\r\n                dateTime: time.toLocaleString().replace(/\\//g, \"-\")\r\n            });\r\n        } catch (e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n            setShowFlagModal(false);\r\n            setReason(\"\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <IonModal isOpen={showFlagModal} cssClass='post-question-modal' onDidDismiss={() => setShowFlagModal(false)}>\r\n            <IonContent>\r\n                <IonGrid id=\"postQns-modal-container\">\r\n                    <IonRow style={{paddingTop: '1%'}}>\r\n                        <IonLabel id=\"postQns-title\">Report Post</IonLabel>\r\n                    </IonRow>\r\n                    <IonItemDivider />\r\n                    <IonRow id=\"postQns-modal-inputArea\">\r\n                        <IonTextarea value={reason} onIonChange={e => setReason(e.detail.value!)} rows={11} contentEditable={true} required placeholder=\"Type your reason for reporting here...\"></IonTextarea>\r\n                    </IonRow>\r\n                    <IonRow className=\"ion-justify-content-around\">\r\n                        <IonButton id=\"postQns-close-button\" fill=\"outline\" onClick={() => setShowFlagModal(false)}>CANCEL</IonButton>\r\n                        <IonButton id=\"postQns-post-button\" onClick={handleReport}>REPORT</IonButton>\r\n                    </IonRow>\r\n                </IonGrid>\r\n            </IonContent>\r\n        </IonModal>\r\n\r\n        <IonButton onClick={() => setShowFlagModal(true)} id=\"forum-question-flagBtn\" size=\"small\" disabled={props.disabled}><FontAwesomeIcon icon={faFlag} size=\"sm\"/></IonButton>\r\n        <IonLoading isOpen={loading} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Forum_FlagModal;"]},"metadata":{},"sourceType":"module"}