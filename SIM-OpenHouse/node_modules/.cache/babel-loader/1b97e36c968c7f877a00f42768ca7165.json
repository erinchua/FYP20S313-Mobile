{"ast":null,"code":"var _jsxFileName = \"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\src\\\\pages\\\\Forum\\\\Forum.tsx\";\nimport { IonAlert, IonButton, IonCheckbox, IonCol, IonContent, IonFooter, IonGrid, IonHeader, IonIcon, IonItem, IonItemDivider, IonLabel, IonList, IonLoading, IonModal, IonPage, IonRouterLink, IonRow, IonSearchbar, IonSegment, IonSegmentButton, IonText, IonTextarea, IonTitle, IonToolbar } from \"@ionic/react\";\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faClock, faCommentAlt } from \"@fortawesome/free-regular-svg-icons\";\nimport { addCircleSharp, personSharp } from \"ionicons/icons\";\nimport \"../../css/Global.css\";\nimport \"../../css/Forum.css\";\nimport TopNav from '../../components/TopNav';\nimport ForumRules from '../../components/Forum/ForumRules';\nimport Forum_FlagModal from \"../../components/Forum/Forum_FlagModal\";\nimport { db } from \"../../firebase\";\nimport { useAuth } from \"../../modules/auth\";\nimport { forumPostsDesc } from \"../../modules/compare\";\n\nconst Forum = () => {\n  const {\n    userID\n  } = useAuth();\n  const {\n    register,\n    errors,\n    handleSubmit\n  } = useForm();\n  let history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [forumDisabled, setForumDisabled] = useState(false);\n  const [checked, setChecked] = useState(false);\n  const [agreedTOC, setAgreedTOC] = useState(true);\n  const [showPostModal, setShowPostModal] = useState(false);\n  const [modalSegmentValue, setModalSegmentValue] = useState('');\n  const [entry, setEntry] = useState(\"\");\n  const [questions, setQuestions] = useState([]);\n  const [keyword, setKeyword] = useState(\"\");\n\n  const onSubmit = async () => {\n    setLoading(true);\n    if (checked) await db.collection('Forum').doc(userID).update({\n      readRules: true\n    });\n    setLoading(false);\n  };\n\n  const handleQuestion = async () => {\n    try {\n      setLoading(true);\n      const time = new Date();\n      let name;\n\n      if (entry !== \"\") {\n        await db.collection('Students').doc(userID).get().then(doc => {\n          name = doc.data().firstName + \" \" + doc.data().lastName;\n        });\n        const docRef = db.collection('Forum').doc(userID).collection('Questions').doc(time.getTime().toString());\n        await docRef.set({\n          id: +docRef.id,\n          entry: entry,\n          posterName: name,\n          posterId: userID,\n          dateTime: time.toLocaleString().replace(/\\//g, \"-\"),\n          noOfComments: 0,\n          deleted: false,\n          reported: false\n        });\n      }\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setLoading(false);\n      setShowPostModal(false);\n      setEntry(\"\");\n    }\n  };\n\n  useEffect(() => {\n    setQuestions([]);\n    db.collection('Openhouse').get().then(snapshot => {\n      let disabled = false;\n      snapshot.forEach(doc => {\n        if (doc.data().disableForum) {\n          disabled = true;\n          setLoading(false);\n        }\n      });\n      setForumDisabled(disabled);\n\n      if (!disabled) {\n        /* db.collection('Forum').get().then(uRef => {\r\n            const questions: any = [];\r\n                  uRef.forEach(user => {\r\n                if (user.id === userID && user.data().suspended) \r\n                    return history.goBack();\r\n                      return db.collection('Forum').doc(user.id).collection('Questions').onSnapshot(entries => {\r\n                    entries.docChanges().forEach(change => {\r\n                        questions.unshift({\r\n                            id: +change.doc.id,\r\n                            entry: change.doc.data().entry,\r\n                            dateTime: change.doc.data().dateTime,\r\n                            user: change.doc.data().posterName,\r\n                            uid: change.doc.data().posterId,\r\n                            commentCount: change.doc.data().noOfComments,\r\n                            removed: change.doc.data().deleted\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n                  setTimeout(() => {\r\n                questions.sort(forumPostsDesc);\r\n                setQuestions(questions);\r\n                setLoading(false);\r\n            }, 500);\r\n        }); */\n        let readRules = false;\n        return db.collection('Forum').doc(userID).onSnapshot(snapshot => {\n          if (snapshot.exists) {\n            var _snapshot$data, _snapshot$data2;\n\n            if ((_snapshot$data = snapshot.data()) === null || _snapshot$data === void 0 ? void 0 : _snapshot$data.suspended) return history.goBack();\n            if ((_snapshot$data2 = snapshot.data()) === null || _snapshot$data2 === void 0 ? void 0 : _snapshot$data2.readRules) readRules = true;\n          }\n\n          setAgreedTOC(readRules);\n\n          if (readRules) {\n            setLoading(true);\n            return db.collectionGroup('Questions').onSnapshot(entries => {\n              const questions = [];\n              entries.forEach(question => {\n                questions.unshift({\n                  id: +question.id,\n                  entry: question.data().entry,\n                  dateTime: question.data().dateTime,\n                  user: question.data().posterName,\n                  uid: question.data().posterId,\n                  commentCount: question.data().noOfComments,\n                  removed: question.data().deleted\n                });\n              });\n              setTimeout(() => {\n                questions.sort(forumPostsDesc);\n                setQuestions(questions);\n                setLoading(false);\n              }, 500);\n            });\n          }\n        });\n      }\n    }).catch(error => console.log(error));\n  }, []);\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TopNav, {\n    title: \"Forum\",\n    route: \"/u/home\",\n    backarrow: true,\n    hamburger: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(IonContent, {\n    fullscreen: true,\n    id: \"forum-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonAlert, {\n    isOpen: forumDisabled,\n    onDidDismiss: () => {\n      history.goBack();\n    },\n    cssClass: \"alertBox\",\n    mode: \"md\",\n    header: 'Forum Unvailable',\n    message: 'The forum is currently not available at this time. The forum will reopen again in the next Open House.',\n    buttons: ['Ok'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }), agreedTOC === true ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"forum-searchbar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      e.preventDefault();\n      history.push(`/u/forumSearch/${keyword}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonSearchbar, {\n    value: keyword,\n    onIonChange: e => setKeyword(e.detail.value),\n    enterkeyhint: \"search\",\n    id: \"forum-searchbar\",\n    animated: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"forum-heading-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    size: \"10\",\n    className: \"ion-align-self-center forum-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonTitle, {\n    id: \"forum-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 37\n    }\n  }, \"All Discussions\")), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"2\",\n    className: \"forum-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(ForumRules, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 37\n    }\n  })))), questions.length > 0 ? questions.map(post => post.removed === false ? /*#__PURE__*/React.createElement(IonList, {\n    className: \"forum-container\",\n    key: post.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(IonRouterLink, {\n    href: `/u/forumViewQuestion/${post.id}/${post.uid}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 57\n    }\n  }, post.entry))), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question-details\",\n    id: \"forum-userName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 53\n    }\n  }, \"~ \", post.user))), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-align-items-end ion-justify-content-start\",\n    id: \"forum-question-detail-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    size: \"1\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faClock,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"6\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 53\n    }\n  }, post.dateTime)), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"1\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCommentAlt,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"3\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 53\n    }\n  }, post.commentCount)), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"1\",\n    className: \"ion-align-self-end forum-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Forum_FlagModal, {\n    disabled: false,\n    postId: post.id,\n    postType: \"Question\",\n    postContent: post.entry,\n    offender: post.user,\n    offenderId: post.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 53\n    }\n  }))))) : null) : /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    color: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 41\n    }\n  }, \"Looks like there are no discussion going on right now. Why not start one?\")))) : /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"forumRulesGrid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    id: \"important-notice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, \"*Important Notice*\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-rules\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 33\n    }\n  }, \"Forum Rules\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 33\n    }\n  }, \"This forum is strictly for discussion about programmes offered by SIM and its partner universities and SIM Open House. Please adhere to the following rules before posting in the forum.\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 33\n    }\n  }, \"1. Remain respectful of other users at all times.\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 33\n    }\n  }, \"2. Please do not spam. The definition of spam is an irrelevant or advertising post. Any post that is considered spam will be removed.\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 33\n    }\n  }, \"3. Do not post offensive posts, links or images.\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 33\n    }\n  }, \"4. Please do not post threads text in all CAPITALS since this is considered to be shouting.\")), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forum-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 33\n    }\n  }, \"Anyone who breaks any of the above rules will be banned from the forum. Let's keep this forum safe for everyone.\")), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonItem, {\n    id: \"forum-checkbox-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    size: \"2\",\n    sizeSm: \"2\",\n    className: \"ion-align-self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(IonCheckbox, {\n    name: \"forumCheckbox\",\n    checked: checked,\n    onIonChange: e => setChecked(e.detail.checked),\n    ref: register({\n      validate: value => checked === true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"10\",\n    sizeSm: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    id: \"forum-checkbox-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 41\n    }\n  }, \"*I have read the above forum rules and agree to abide to the rules stated above. I understand that should I break any of the rules above, I may be banned from the forum.\"))), errors.forumCheckbox && errors.forumCheckbox.type === \"validate\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"errorMessage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 102\n    }\n  }, \"*Please check the above after reading the rules to proceed to the forum\")), /*#__PURE__*/React.createElement(IonRow, {\n    class: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    id: \"forumRulesBtn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 33\n    }\n  }, \"PROCEED TO FORUM\")))), /*#__PURE__*/React.createElement(IonModal, {\n    isOpen: showPostModal,\n    cssClass: \"post-question-modal\",\n    onDidDismiss: () => setShowPostModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"postQns-modal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    style: {\n      paddingTop: '1%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    id: \"postQns-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 33\n    }\n  }, \"Post Question\")), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"postQns-modal-inputArea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonTextarea, {\n    value: entry,\n    onIonChange: e => setEntry(e.detail.value),\n    rows: 11,\n    placeholder: \"Type your question here...\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-close-button\",\n    fill: \"outline\",\n    onClick: () => [setShowPostModal(false), setModalSegmentValue('')],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 33\n    }\n  }, \"CLOSE\"), /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-post-button\",\n    onClick: handleQuestion,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 33\n    }\n  }, \"POST\"))))), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  })), agreedTOC === true ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonSegment, {\n    scrollable: true,\n    value: modalSegmentValue,\n    onIonChange: e => console.log(`${e.detail.value}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonSegmentButton, {\n    className: \"forum-segmentBtn\",\n    value: \"postQuestionBtn\",\n    onClick: () => [setShowPostModal(true), setModalSegmentValue('postQuestionBtn')],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: addCircleSharp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 186\n    }\n  })), /*#__PURE__*/React.createElement(IonSegmentButton, {\n    className: \"forum-segmentBtn\",\n    value: \"forumUserBtn\",\n    onClick: e => {\n      e.preventDefault();\n      history.push('/u/forumUser');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: personSharp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 172\n    }\n  })))))) : '');\n};\n\nexport default Forum;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/pages/Forum/Forum.tsx"],"names":["IonAlert","IonButton","IonCheckbox","IonCol","IonContent","IonFooter","IonGrid","IonHeader","IonIcon","IonItem","IonItemDivider","IonLabel","IonList","IonLoading","IonModal","IonPage","IonRouterLink","IonRow","IonSearchbar","IonSegment","IonSegmentButton","IonText","IonTextarea","IonTitle","IonToolbar","React","useEffect","useState","useHistory","useForm","FontAwesomeIcon","faClock","faCommentAlt","addCircleSharp","personSharp","TopNav","ForumRules","Forum_FlagModal","db","useAuth","forumPostsDesc","Forum","userID","register","errors","handleSubmit","history","loading","setLoading","forumDisabled","setForumDisabled","checked","setChecked","agreedTOC","setAgreedTOC","showPostModal","setShowPostModal","modalSegmentValue","setModalSegmentValue","entry","setEntry","questions","setQuestions","keyword","setKeyword","onSubmit","collection","doc","update","readRules","handleQuestion","time","Date","name","get","then","data","firstName","lastName","docRef","getTime","toString","set","id","posterName","posterId","dateTime","toLocaleString","replace","noOfComments","deleted","reported","e","console","log","snapshot","disabled","forEach","disableForum","onSnapshot","exists","suspended","goBack","collectionGroup","entries","question","unshift","user","uid","commentCount","removed","setTimeout","sort","catch","error","preventDefault","push","detail","value","length","map","post","validate","forumCheckbox","type","paddingTop"],"mappings":"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","sourcesContent":["import { IonAlert, IonButton, IonCheckbox, IonCol, IonContent, IonFooter, IonGrid, IonHeader, IonIcon, IonItem, IonItemDivider, IonLabel, IonList, IonLoading, IonModal, IonPage, IonRouterLink, IonRow, IonSearchbar, IonSegment, IonSegmentButton, IonText, IonTextarea, IonTitle, IonToolbar } from \"@ionic/react\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faClock, faCommentAlt } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { addCircleSharp, personSharp } from \"ionicons/icons\";\r\n\r\nimport \"../../css/Global.css\";\r\nimport \"../../css/Forum.css\";\r\nimport TopNav from '../../components/TopNav';\r\nimport ForumRules from '../../components/Forum/ForumRules';\r\nimport Forum_FlagModal from \"../../components/Forum/Forum_FlagModal\";\r\nimport { db } from \"../../firebase\";\r\nimport { useAuth } from \"../../modules/auth\";\r\nimport { forumPostsDesc } from \"../../modules/compare\";\r\n\r\nconst Forum: React.FC = () => {\r\n    const { userID } = useAuth();\r\n    const { register, errors, handleSubmit } = useForm();\r\n\r\n    let history = useHistory();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [forumDisabled, setForumDisabled] = useState(false);\r\n    const [checked, setChecked] = useState(false);\r\n    const [agreedTOC, setAgreedTOC] = useState(true);\r\n    const [showPostModal, setShowPostModal] = useState(false);\r\n    const [modalSegmentValue, setModalSegmentValue] = useState('');\r\n    const [entry, setEntry] = useState(\"\");\r\n    const [questions, setQuestions] = useState([]);\r\n    const [keyword, setKeyword] = useState(\"\");\r\n\r\n    const onSubmit = async () => {\r\n        setLoading(true);\r\n        if (checked)\r\n            await db.collection('Forum').doc(userID).update({ readRules: true });\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleQuestion = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const time = new Date();\r\n            let name: string;\r\n\r\n            if (entry !== \"\") {\r\n                await db.collection('Students').doc(userID).get().then((doc: any) => {\r\n                    name = doc.data().firstName + \" \" + doc.data().lastName;\r\n                });\r\n\r\n                const docRef = db.collection('Forum').doc(userID).collection('Questions').doc((time.getTime()).toString());\r\n                await docRef.set({\r\n                    id: +docRef.id,\r\n                    entry: entry,\r\n                    posterName: name!,\r\n                    posterId: userID,\r\n                    dateTime: time.toLocaleString().replace(/\\//g, \"-\"),\r\n                    noOfComments: 0,\r\n                    deleted: false,\r\n                    reported: false\r\n                });\r\n            }\r\n        } catch (e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n            setShowPostModal(false);\r\n            setEntry(\"\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setQuestions([]);\r\n\r\n        db.collection('Openhouse').get().then(snapshot => {\r\n            let disabled = false;\r\n            snapshot.forEach(doc => {\r\n                if (doc.data().disableForum) {\r\n                    disabled = true;\r\n                    setLoading(false);\r\n                }\r\n            });\r\n            setForumDisabled(disabled);\r\n\r\n            if (!disabled) {\r\n                /* db.collection('Forum').get().then(uRef => {\r\n                    const questions: any = [];\r\n    \r\n                    uRef.forEach(user => {\r\n                        if (user.id === userID && user.data().suspended) \r\n                            return history.goBack();\r\n    \r\n                        return db.collection('Forum').doc(user.id).collection('Questions').onSnapshot(entries => {\r\n                            entries.docChanges().forEach(change => {\r\n                                questions.unshift({\r\n                                    id: +change.doc.id,\r\n                                    entry: change.doc.data().entry,\r\n                                    dateTime: change.doc.data().dateTime,\r\n                                    user: change.doc.data().posterName,\r\n                                    uid: change.doc.data().posterId,\r\n                                    commentCount: change.doc.data().noOfComments,\r\n                                    removed: change.doc.data().deleted\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n    \r\n                    setTimeout(() => {\r\n                        questions.sort(forumPostsDesc);\r\n                        setQuestions(questions);\r\n                        setLoading(false);\r\n                    }, 500);\r\n                }); */\r\n\r\n                let readRules = false;\r\n                return db.collection('Forum').doc(userID).onSnapshot(snapshot => {\r\n                    if (snapshot.exists) {\r\n                        if (snapshot.data()?.suspended)\r\n                            return history.goBack();\r\n\r\n                        if (snapshot.data()?.readRules) \r\n                            readRules = true;\r\n                    }\r\n                    setAgreedTOC(readRules);\r\n\r\n                    if (readRules) {\r\n                        setLoading(true);\r\n                        return db.collectionGroup('Questions').onSnapshot(entries => {\r\n                            const questions: any = [];\r\n                            entries.forEach(question => {\r\n                                questions.unshift({\r\n                                    id: +question.id,\r\n                                    entry: question.data().entry,\r\n                                    dateTime: question.data().dateTime,\r\n                                    user: question.data().posterName,\r\n                                    uid: question.data().posterId,\r\n                                    commentCount: question.data().noOfComments,\r\n                                    removed: question.data().deleted\r\n                                });\r\n                            });\r\n\r\n                            setTimeout(() => {\r\n                                questions.sort(forumPostsDesc);\r\n                                setQuestions(questions);\r\n                                setLoading(false);\r\n                            }, 500);\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }).catch((error) => console.log(error));\r\n    }, []);\r\n\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <TopNav title=\"Forum\" route=\"/u/home\" backarrow={true} hamburger={true} />\r\n            </IonHeader>\r\n\r\n            <IonContent fullscreen id=\"forum-content\">\r\n                <IonAlert\r\n                    isOpen={forumDisabled}\r\n                    onDidDismiss={() => { history.goBack() }}\r\n                    cssClass='alertBox'\r\n                    mode='md'\r\n                    header={'Forum Unvailable'}\r\n                    message={'The forum is currently not available at this time. The forum will reopen again in the next Open House.'}\r\n                    buttons={['Ok']}\r\n                ></IonAlert>\r\n\r\n                {agreedTOC === true ?\r\n                    <>\r\n                        <IonGrid id=\"forum-searchbar-container\">\r\n                            <IonRow>\r\n                                <form onSubmit={e => { e.preventDefault(); history.push(`/u/forumSearch/${keyword}`); }}>\r\n                                    <IonSearchbar value={keyword} onIonChange={e => setKeyword(e.detail.value!)} enterkeyhint=\"search\" id=\"forum-searchbar\" animated></IonSearchbar>\r\n                                </form>\r\n                            </IonRow>\r\n                        </IonGrid>\r\n\r\n\r\n                        <IonGrid id=\"forum-heading-container\">\r\n                            <IonRow className=\"ion-justify-content-start\">\r\n                                <IonCol size=\"10\" className=\"ion-align-self-center forum-col\">\r\n                                    <IonTitle id=\"forum-heading\">All Discussions</IonTitle>\r\n                                </IonCol>\r\n                                <IonCol size=\"2\" className=\"forum-col\">\r\n                                    <ForumRules />\r\n                                </IonCol>\r\n                            </IonRow>\r\n                        </IonGrid>\r\n\r\n                        {/* Display all Questions */}\r\n                        {questions.length > 0 ?\r\n                            questions.map((post: any) => (\r\n                                post.removed === false ? (\r\n                                    <IonList className=\"forum-container\" key={post.id}>\r\n                                        <IonGrid>\r\n                                            <IonRouterLink href={`/u/forumViewQuestion/${post.id}/${post.uid}`}>\r\n                                                <IonRow>\r\n                                                    <IonLabel>\r\n                                                        <IonText className=\"forum-question\">{post.entry}</IonText>\r\n                                                    </IonLabel>\r\n                                                </IonRow>\r\n                                                <IonRow className=\"ion-justify-content-end\">\r\n                                                    <IonText className=\"forum-question-details\" id=\"forum-userName\">~ {post.user}</IonText>\r\n                                                </IonRow>\r\n                                            </IonRouterLink>\r\n                                            <IonRow className=\"ion-align-items-end ion-justify-content-start\" id=\"forum-question-detail-container\">\r\n                                                <IonCol size=\"1\" className=\"forum-col ion-align-self-end\">\r\n                                                    <FontAwesomeIcon icon={faClock} size=\"sm\" />\r\n                                                </IonCol>\r\n                                                <IonCol size=\"6\" className=\"forum-col ion-align-self-end\">\r\n                                                    <IonText className=\"forum-question-details\">{post.dateTime}</IonText>\r\n                                                </IonCol>\r\n                                                <IonCol size=\"1\" className=\"forum-col ion-align-self-end\">\r\n                                                    <FontAwesomeIcon icon={faCommentAlt} size=\"sm\" />\r\n                                                </IonCol>\r\n                                                <IonCol size=\"3\" className=\"forum-col ion-align-self-end\">\r\n                                                    <IonText className=\"forum-question-details\">{post.commentCount}</IonText>\r\n                                                </IonCol>\r\n                                                <IonCol size=\"1\" className=\"ion-align-self-end forum-col\">\r\n                                                    <Forum_FlagModal disabled={false} postId={post.id} postType={\"Question\"} postContent={post.entry} offender={post.user} offenderId={post.uid} />\r\n                                                </IonCol>\r\n                                            </IonRow>\r\n                                        </IonGrid>\r\n                                    </IonList>\r\n                                ) : null\r\n                            )) : (\r\n                                <IonGrid>\r\n                                    <IonRow className=\"ion-justify-content-center\">\r\n                                        <IonText color=\"medium\">Looks like there are no discussion going on right now. Why not start one?</IonText>\r\n                                    </IonRow>\r\n                                </IonGrid>\r\n                            )\r\n                        }\r\n                    </>\r\n\r\n                    : <form onSubmit={handleSubmit(onSubmit)}>\r\n                        <IonGrid id=\"forumRulesGrid\">\r\n                            <IonRow id=\"important-notice\">\r\n                                <IonText>*Important Notice*</IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-rules\">\r\n                                <IonText>Forum Rules</IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-instructions\">\r\n                                <IonText>This forum is strictly for discussion about programmes offered by SIM and its partner universities and SIM\r\n                                Open House. Please adhere to the following rules before posting in the forum.\r\n                                </IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-instructions\">\r\n                                <IonText>1. Remain respectful of other users at all times.</IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-instructions\">\r\n                                <IonText>2. Please do not spam. The definition of spam is an irrelevant or advertising post. Any post that is considered spam will be removed.</IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-instructions\">\r\n                                <IonText>3. Do not post offensive posts, links or images.</IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-instructions\">\r\n                                <IonText>4. Please do not post threads text in all CAPITALS since this is considered to be shouting.</IonText>\r\n                            </IonRow>\r\n                            <IonRow id=\"forum-instructions\">\r\n                                <IonText>Anyone who breaks any of the above rules will be banned from the forum. Let's keep this forum safe for everyone.</IonText>\r\n                            </IonRow>\r\n                            <IonRow className=\"ion-justify-content-center\">\r\n                                <IonItem id=\"forum-checkbox-container\">\r\n                                    <IonCol size=\"2\" sizeSm=\"2\" className=\"ion-align-self-center\">\r\n                                        <IonCheckbox name=\"forumCheckbox\" checked={checked} onIonChange={(e) => setChecked(e.detail.checked)} ref={register({ validate: (value) => checked === true })}></IonCheckbox>\r\n                                    </IonCol>\r\n                                    <IonCol size=\"10\" sizeSm=\"10\">\r\n                                        <IonText id=\"forum-checkbox-text\">\r\n                                            *I have read the above forum rules and agree to abide to the rules stated above. I understand that should I break any of the rules above, I may be banned from the forum.\r\n                                        </IonText>\r\n                                    </IonCol>\r\n                                </IonItem>\r\n                                {errors.forumCheckbox && errors.forumCheckbox.type === \"validate\" && <div className=\"errorMessage\">*Please check the above after reading the rules to proceed to the forum</div>}\r\n                            </IonRow>\r\n                            <IonRow class=\"ion-justify-content-center\">\r\n                                <IonButton id=\"forumRulesBtn\" type=\"submit\">PROCEED TO FORUM</IonButton>\r\n                            </IonRow>\r\n                        </IonGrid>\r\n                    </form>\r\n                }\r\n\r\n                {/* Post Question Modal */}\r\n                <IonModal isOpen={showPostModal} cssClass='post-question-modal' onDidDismiss={() => setShowPostModal(false)}>\r\n                    <IonContent>\r\n                        <IonGrid id=\"postQns-modal-container\">\r\n                            <IonRow style={{ paddingTop: '1%' }}>\r\n                                <IonLabel id=\"postQns-title\">Post Question</IonLabel>\r\n                            </IonRow>\r\n                            <IonItemDivider />\r\n                            <IonRow id=\"postQns-modal-inputArea\">\r\n                                <IonTextarea value={entry} onIonChange={e => setEntry(e.detail.value!)} rows={11} placeholder=\"Type your question here...\" required></IonTextarea>\r\n                            </IonRow>\r\n                            <IonRow className=\"ion-justify-content-around\">\r\n                                <IonButton id=\"postQns-close-button\" fill=\"outline\" onClick={() => [setShowPostModal(false), setModalSegmentValue('')]}>CLOSE</IonButton>\r\n                                <IonButton id=\"postQns-post-button\" onClick={handleQuestion}>POST</IonButton>\r\n                            </IonRow>\r\n                        </IonGrid>\r\n                    </IonContent>\r\n                </IonModal>\r\n                <IonLoading isOpen={loading} />\r\n            </IonContent>\r\n\r\n            {/* Bottom Tabs */}\r\n            {agreedTOC === true ?\r\n                <>\r\n                    <IonFooter>\r\n                        <IonToolbar>\r\n                            <IonSegment scrollable value={modalSegmentValue} onIonChange={(e) => console.log(`${e.detail.value}`)}>\r\n                                <IonSegmentButton className=\"forum-segmentBtn\" value=\"postQuestionBtn\" onClick={() => [setShowPostModal(true), setModalSegmentValue('postQuestionBtn')]}><IonIcon icon={addCircleSharp} /></IonSegmentButton>\r\n                                <IonSegmentButton className=\"forum-segmentBtn\" value=\"forumUserBtn\" onClick={(e) => { e.preventDefault(); history.push('/u/forumUser'); }}><IonIcon icon={personSharp} /></IonSegmentButton>\r\n                            </IonSegment>\r\n                        </IonToolbar>\r\n                    </IonFooter>\r\n                </> : ''\r\n            }\r\n        </IonPage>\r\n    );\r\n};\r\n\r\nexport default Forum;"]},"metadata":{},"sourceType":"module"}