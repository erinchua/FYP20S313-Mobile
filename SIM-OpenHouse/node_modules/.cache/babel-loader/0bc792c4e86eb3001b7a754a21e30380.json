{"ast":null,"code":"var _jsxFileName = \"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\src\\\\components\\\\Forum\\\\ForumComments.tsx\";\nimport { IonAlert, IonButton, IonCol, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\nimport React, { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCommentDots, faEdit } from '@fortawesome/free-regular-svg-icons';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport \"../../css/Global.css\";\nimport \"../../css/Forum.css\";\nimport { db } from '../../firebase';\nimport { useAuth } from '../../modules/auth';\n\nconst ForumQuestions = props => {\n  const {\n    userID\n  } = useAuth(); //const comments = props.comments.filter((ele, pos, self) => { return self.indexOf(ele) === pos });\n\n  const [loading, setLoading] = useState(false);\n  const [showEditCommentModal, setShowEditCommentModal] = useState(false);\n  const [deleteAlert, setDeleteAlert] = useState({\n    alert: false,\n    loading: false\n  }); //const [comments, setComments] = useState([]);\n\n  const [entry, setEntry] = useState(\"\");\n  const [toBeEdited, setToBeEdited] = useState(0);\n  const [toBeDeleted, setToBeDeleted] = useState(0);\n\n  const handleDelete = async postId => {\n    try {\n      setDeleteAlert({\n        alert: false,\n        loading: true\n      });\n      await db.collection('Forum').doc(userID).collection('Comments').doc(postId).update({\n        deleted: true\n      });\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setDeleteAlert({\n        alert: false,\n        loading: false\n      });\n    }\n  };\n\n  const handleEdit = async postId => {\n    try {\n      setLoading(true);\n      await db.collection('Forum').doc(userID).collection('Comments').doc(postId).update({\n        entry: entry\n      });\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setShowEditCommentModal(false);\n      setLoading(false);\n      setEntry(\"\");\n    }\n  };\n\n  console.log(props.comments);\n  /* useEffect(() => {\r\n      return db.collection('Forum').doc(userID).collection('Comments').where(\"deleted\", \"==\", false).onSnapshot(snaps => {\r\n          const posts: any = [];\r\n          \r\n          snaps.forEach(async (snap) => {\r\n              let post: any = { ...snap.data() }\r\n                await db.collection('Forum').get().then(users => {\r\n                  users.forEach(user => {\r\n                      return db.collection('Forum').doc(user.id).collection('Questions').doc(snap.data().questionId.toString()).onSnapshot(question => {\r\n                          if(question.exists) {\r\n                              post.question = question.data()?.entry;\r\n                              post.questionRemoved = question.data()?.deleted;\r\n                          }\r\n                      });\r\n                  });\r\n              });\r\n              posts.push(post)\r\n          });\r\n            setTimeout(() => {\r\n              setComments(posts);\r\n              setLoading(false);\r\n          }, 500);\r\n      });\r\n  }, []); */\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"forumQnsCom-tableGrid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forumQnsCom-tableHeader\",\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"Question\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"My Comment\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, \"Posted Date/Time\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 74\n    }\n  }, \"No. of\"), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 136\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCommentDots,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 183\n    }\n  }))), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Edit Comment\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"Delete Comment\")), props.comments.map(post => post.hasOwnProperty('commentId') === false ? /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    key: post.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, post.questionRemoved === false ? post.question : \"[deleted]\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, post.entry), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, post.dateTime), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, post.noOfReplies), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => [setShowEditCommentModal(true), setToBeEdited(post.id)],\n    className: \"forumQnsCom-DataBtn\",\n    size: \"small\",\n    style: {\n      marginTop: \"-5%\",\n      marginBottom: \"-5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEdit,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 211\n    }\n  }))), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => [setDeleteAlert({\n      alert: true,\n      loading: false\n    }), setToBeDeleted(post.id)],\n    className: \"forumQnsCom-DataBtn\",\n    size: \"small\",\n    style: {\n      marginTop: \"-5%\",\n      marginBottom: \"-5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTrash,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 230\n    }\n  })))) : null)), /*#__PURE__*/React.createElement(IonModal, {\n    isOpen: showEditCommentModal,\n    cssClass: \"post-question-modal\",\n    onDidDismiss: () => setShowEditCommentModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"postQns-modal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    style: {\n      paddingTop: '1%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    id: \"postQns-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"Edit Comment\")), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"postQns-modal-inputArea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonTextarea, {\n    rows: 11,\n    contentEditable: true,\n    value: entry,\n    onIonChange: e => setEntry(e.detail.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-close-button\",\n    fill: \"outline\",\n    onClick: () => setShowEditCommentModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, \"CANCEL\"), /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-post-button\",\n    onClick: () => handleEdit(toBeEdited.toString()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, \"UPDATE\"))))), /*#__PURE__*/React.createElement(IonAlert, {\n    isOpen: deleteAlert.alert,\n    cssClass: \"alertBox\",\n    header: 'Delete Comment',\n    message: 'Are you sure you want to delete the comment?',\n    buttons: [{\n      text: 'NO',\n      handler: () => setDeleteAlert({\n        alert: false,\n        loading: false\n      })\n    }, {\n      text: 'YES',\n      handler: () => handleDelete(toBeDeleted.toString())\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: deleteAlert.loading || loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default ForumQuestions;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/components/Forum/ForumComments.tsx"],"names":["IonAlert","IonButton","IonCol","IonContent","IonGrid","IonItemDivider","IonLabel","IonLoading","IonModal","IonRow","IonTextarea","React","useState","FontAwesomeIcon","faCommentDots","faEdit","faTrash","db","useAuth","ForumQuestions","props","userID","loading","setLoading","showEditCommentModal","setShowEditCommentModal","deleteAlert","setDeleteAlert","alert","entry","setEntry","toBeEdited","setToBeEdited","toBeDeleted","setToBeDeleted","handleDelete","postId","collection","doc","update","deleted","e","console","log","handleEdit","comments","map","post","hasOwnProperty","id","questionRemoved","question","dateTime","noOfReplies","marginTop","marginBottom","paddingTop","detail","value","toString","text","handler"],"mappings":"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","sourcesContent":["import { IonAlert, IonButton, IonCol, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCommentDots, faEdit } from '@fortawesome/free-regular-svg-icons';\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport \"../../css/Global.css\";\r\nimport \"../../css/Forum.css\";\r\nimport { db } from '../../firebase';\r\nimport { useAuth } from '../../modules/auth';\r\n\r\nconst ForumQuestions: React.FC<{ comments: any[] }> = (props) => {\r\n    const { userID } = useAuth();\r\n\r\n    //const comments = props.comments.filter((ele, pos, self) => { return self.indexOf(ele) === pos });\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [showEditCommentModal, setShowEditCommentModal] = useState(false);\r\n    const [deleteAlert, setDeleteAlert] = useState({ alert: false, loading: false });\r\n    //const [comments, setComments] = useState([]);\r\n    const [entry, setEntry] = useState(\"\");\r\n    const [toBeEdited, setToBeEdited] = useState(0);\r\n    const [toBeDeleted, setToBeDeleted] = useState(0);\r\n\r\n    const handleDelete = async (postId: string) => {\r\n        try {\r\n            setDeleteAlert({ alert: false, loading: true });\r\n            await db.collection('Forum').doc(userID).collection('Comments').doc(postId).update({\r\n                deleted: true\r\n            });\r\n        } catch(e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setDeleteAlert({ alert: false, loading: false });\r\n        }\r\n    }\r\n\r\n    const handleEdit = async (postId: string) => {\r\n        try {\r\n            setLoading(true);\r\n            await db.collection('Forum').doc(userID).collection('Comments').doc(postId).update({\r\n                entry: entry\r\n            });\r\n        } catch(e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setShowEditCommentModal(false);\r\n            setLoading(false);\r\n            setEntry(\"\");\r\n        }\r\n    }\r\n\r\n    console.log(props.comments)\r\n\r\n    /* useEffect(() => {\r\n        return db.collection('Forum').doc(userID).collection('Comments').where(\"deleted\", \"==\", false).onSnapshot(snaps => {\r\n            const posts: any = [];\r\n            \r\n            snaps.forEach(async (snap) => {\r\n                let post: any = { ...snap.data() }\r\n\r\n                await db.collection('Forum').get().then(users => {\r\n                    users.forEach(user => {\r\n                        return db.collection('Forum').doc(user.id).collection('Questions').doc(snap.data().questionId.toString()).onSnapshot(question => {\r\n                            if(question.exists) {\r\n                                post.question = question.data()?.entry;\r\n                                post.questionRemoved = question.data()?.deleted;\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n                posts.push(post)\r\n            });\r\n\r\n            setTimeout(() => {\r\n                setComments(posts);\r\n                setLoading(false);\r\n            }, 500);\r\n        });\r\n    }, []); */\r\n\r\n    return (\r\n        <>\r\n            <IonGrid id=\"forumQnsCom-tableGrid\">\r\n                <IonRow id=\"forumQnsCom-tableHeader\" className=\"ion-justify-content-center\">\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Question</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">My Comment</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Posted Date/Time</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\"><IonRow className=\"ion-justify-content-center\">No. of</IonRow><IonRow className=\"ion-justify-content-center\"><FontAwesomeIcon icon={faCommentDots} size=\"lg\" /></IonRow></IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Edit Comment</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Delete Comment</IonCol>\r\n                </IonRow>\r\n                { props.comments.map((post: any) => (\r\n                    post.hasOwnProperty('commentId') === false ? (\r\n                        <IonRow className=\"ion-justify-content-center\" key={post.id}>\r\n                            <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.questionRemoved === false ? post.question : \"[deleted]\"}</IonCol>\r\n                            <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.entry}</IonCol>\r\n                            <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.dateTime}</IonCol>\r\n                            <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.noOfReplies}</IonCol>\r\n                            <IonCol className=\"forumQnsCom-Data ion-text-wrap\">\r\n                                {/* <Forum_EditCommentModal /> */}\r\n                                <IonButton onClick={() => [setShowEditCommentModal(true), setToBeEdited(post.id)]} className=\"forumQnsCom-DataBtn\" size=\"small\" style={{ marginTop: \"-5%\", marginBottom: \"-5%\" }}><FontAwesomeIcon icon={faEdit} size=\"lg\" /></IonButton>\r\n                            </IonCol>\r\n                            <IonCol className=\"forumQnsCom-Data ion-text-wrap\">\r\n                                {/* <Forum_DeleteComment /> */}\r\n                                <IonButton onClick={() => [setDeleteAlert({ alert: true, loading: false }), setToBeDeleted(post.id)]} className=\"forumQnsCom-DataBtn\" size=\"small\" style={{ marginTop: \"-5%\", marginBottom: \"-5%\" }}><FontAwesomeIcon icon={faTrash} size=\"lg\" /></IonButton>\r\n                            </IonCol>\r\n                        </IonRow>\r\n                    ) : null\r\n                ))}\r\n            </IonGrid>\r\n            <IonModal isOpen={showEditCommentModal} cssClass='post-question-modal' onDidDismiss={() => setShowEditCommentModal(false)}>\r\n                <IonContent>\r\n                    <IonGrid id=\"postQns-modal-container\">\r\n                        <IonRow style={{paddingTop: '1%'}}>\r\n                            <IonLabel id=\"postQns-title\">Edit Comment</IonLabel>\r\n                        </IonRow>\r\n                        <IonItemDivider />\r\n                        <IonRow id=\"postQns-modal-inputArea\">\r\n                            <IonTextarea rows={11} contentEditable={true} value={entry} onIonChange={e => setEntry(e.detail.value!)} required></IonTextarea>\r\n                        </IonRow>\r\n                        <IonRow className=\"ion-justify-content-around\">\r\n                            <IonButton id=\"postQns-close-button\" fill=\"outline\" onClick={() => setShowEditCommentModal(false)}>CANCEL</IonButton>\r\n                            <IonButton id=\"postQns-post-button\" onClick={() => handleEdit(toBeEdited.toString())}>UPDATE</IonButton>\r\n                        </IonRow>\r\n                    </IonGrid>\r\n                </IonContent>\r\n            </IonModal>\r\n\r\n            {/* Delete Comment Alert */}\r\n            <IonAlert\r\n                isOpen={deleteAlert.alert}\r\n                cssClass='alertBox' header={'Delete Comment'}\r\n                message={'Are you sure you want to delete the comment?'}\r\n                buttons={[\r\n                    {\r\n                        text: 'NO',\r\n                        handler: () => setDeleteAlert({ alert: false, loading: false })\r\n                    }, {\r\n                        text: 'YES',\r\n                        handler: () => handleDelete(toBeDeleted.toString())\r\n                    }]}\r\n            ></IonAlert>\r\n            <IonLoading isOpen={deleteAlert.loading || loading} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ForumQuestions;"]},"metadata":{},"sourceType":"module"}