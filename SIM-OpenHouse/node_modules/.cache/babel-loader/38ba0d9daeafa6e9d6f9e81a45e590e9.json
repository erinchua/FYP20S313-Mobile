{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{IonButton,IonCol,IonContent,IonGrid,IonHeader,IonPage,IonRow}from'@ionic/react';import React from'react';import{BarcodeScanner}from'@ionic-native/barcode-scanner';import firebase from'firebase';import'../css/Global.css';import'../css/OpenHouseActivities.css';import TopNav from'../components/TopNav';import{db}from'../firebase';import{useAuth}from'../modules/auth';var QRScan=function QRScan(){var _useAuth=useAuth(),userID=_useAuth.userID;var openScanner=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,increment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return BarcodeScanner.scan();case 2:data=_context.sent;console.log(\"Barcode data: \".concat(data.text));if(isNaN(+data.text)){_context.next=8;break;}increment=firebase.firestore.FieldValue.increment(+data.text);_context.next=8;return db.collection('Games').doc(userID).update({points:increment});case 8:case\"end\":return _context.stop();}}},_callee);}));return function openScanner(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(TopNav,{title:\"QR Scanner\",route:\"/u/home\",backarrow:true,hamburger:true})),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true,className:\"QR-content\"},/*#__PURE__*/React.createElement(IonGrid,null,/*#__PURE__*/React.createElement(IonRow,{className:\"ion-justify-content-center\"},/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{color:\"dark\",expand:\"block\",onClick:openScanner},\"Scan barcode\"))))));};export default QRScan;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/pages/QRScan.tsx"],"names":["IonButton","IonCol","IonContent","IonGrid","IonHeader","IonPage","IonRow","React","BarcodeScanner","firebase","TopNav","db","useAuth","QRScan","userID","openScanner","scan","data","console","log","text","isNaN","increment","firestore","FieldValue","collection","doc","update","points"],"mappings":"uZAAA,OAASA,SAAT,CAAoBC,MAApB,CAA4BC,UAA5B,CAAwCC,OAAxC,CAAiDC,SAAjD,CAA4DC,OAA5D,CAAqEC,MAArE,KAAmF,cAAnF,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,cAAT,KAA+B,+BAA/B,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CAEA,MAAO,mBAAP,CACA,MAAO,gCAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,EAAT,KAAmB,aAAnB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,GAAMC,CAAAA,MAAgB,CAAG,QAAnBA,CAAAA,MAAmB,EAAM,cACVD,OAAO,EADG,CACrBE,MADqB,UACrBA,MADqB,CAG7B,GAAMC,CAAAA,WAAW,0FAAG,4KACCP,CAAAA,cAAc,CAACQ,IAAf,EADD,QACZC,IADY,eAElBC,OAAO,CAACC,GAAR,yBAA6BF,IAAI,CAACG,IAAlC,GAFkB,GAIbC,KAAK,CAAC,CAACJ,IAAI,CAACG,IAAP,CAJQ,yBAKVE,SALU,CAKEb,QAAQ,CAACc,SAAT,CAAmBC,UAAnB,CAA8BF,SAA9B,CAAwC,CAACL,IAAI,CAACG,IAA9C,CALF,uBAOVT,CAAAA,EAAE,CAACc,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BZ,MAA3B,EAAmCa,MAAnC,CAA0C,CAC9CC,MAAM,CAAEN,SADsC,CAA1C,CAPU,uDAAH,kBAAXP,CAAAA,WAAW,0CAAjB,CAaA,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,MAAD,EAAQ,KAAK,CAAC,YAAd,CAA2B,KAAK,CAAC,SAAjC,CAA2C,SAAS,CAAG,IAAvD,CAA8D,SAAS,CAAG,IAA1E,EADF,CADF,cAKE,oBAAC,UAAD,EAAY,UAAU,KAAtB,CAAuB,SAAS,CAAC,YAAjC,eACE,oBAAC,OAAD,mBACE,oBAAC,MAAD,EAAQ,SAAS,CAAC,4BAAlB,eACE,oBAAC,MAAD,mBACE,oBAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,CAAwB,MAAM,CAAC,OAA/B,CAAuC,OAAO,CAAEA,WAAhD,iBADF,CADF,CADF,CADF,CALF,CADF,CAiBD,CAjCD,CAmCA,cAAeF,CAAAA,MAAf","sourcesContent":["import { IonButton, IonCol, IonContent, IonGrid, IonHeader, IonPage, IonRow } from '@ionic/react';\r\nimport React from 'react';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\r\nimport firebase from 'firebase';\r\n\r\nimport '../css/Global.css';\r\nimport '../css/OpenHouseActivities.css';\r\nimport TopNav from '../components/TopNav';\r\nimport { db } from '../firebase';\r\nimport { useAuth } from '../modules/auth';\r\n\r\nconst QRScan: React.FC = () => {\r\n  const { userID } = useAuth();\r\n\r\n  const openScanner = async () => {\r\n    const data = await BarcodeScanner.scan();\r\n    console.log(`Barcode data: ${data.text}`);\r\n\r\n    if (!isNaN(+data.text)) {\r\n      const increment = firebase.firestore.FieldValue.increment(+data.text);\r\n\r\n      await db.collection('Games').doc(userID).update({\r\n        points: increment,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <TopNav title=\"QR Scanner\" route=\"/u/home\" backarrow={ true } hamburger={ true }/>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen className=\"QR-content\">\r\n        <IonGrid>\r\n          <IonRow className=\"ion-justify-content-center\">\r\n            <IonCol>\r\n              <IonButton color=\"dark\" expand=\"block\" onClick={openScanner}>Scan barcode</IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default QRScan;\r\n"]},"metadata":{},"sourceType":"module"}