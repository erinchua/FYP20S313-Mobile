{"ast":null,"code":"var _jsxFileName = \"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\src\\\\components\\\\Forum\\\\ForumQuestions.tsx\";\nimport { IonAlert, IonButton, IonCol, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCommentDots, faEdit } from '@fortawesome/free-regular-svg-icons';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport \"../../css/Global.css\";\nimport \"../../css/Forum.css\";\nimport { db } from '../../firebase';\nimport { useAuth } from '../../modules/auth';\n\nconst ForumQuestions = props => {\n  const {\n    userID\n  } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [deleteAlert, setDeleteAlert] = useState({\n    alert: false,\n    loading: false\n  });\n  const [showEditQuestionModal, setShowEditQuestionModal] = useState(false);\n  const [questions, setQuestions] = useState([]);\n  const [entry, setEntry] = useState(\"\");\n  const [toBeEdited, setToBeEdited] = useState(\"\");\n  const [toBeDeleted, setToBeDeleted] = useState(\"\");\n\n  const handleDelete = async postId => {\n    try {\n      setDeleteAlert({\n        alert: false,\n        loading: true\n      });\n      await db.collection('Forum').doc(userID).collection('Questions').doc(postId).update({\n        deleted: true\n      });\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setDeleteAlert({\n        alert: false,\n        loading: false\n      });\n    }\n  };\n\n  const handleEdit = async postId => {\n    try {\n      setLoading(true);\n      await db.collection('Forum').doc(userID).collection('Questions').doc(postId).update({\n        entry: entry\n      });\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setShowEditQuestionModal(false);\n      setLoading(false);\n      setEntry(\"\");\n    }\n  };\n\n  useEffect(() => {\n    return db.collection('Forum').doc(userID).collection('Questions').where(\"deleted\", \"==\", false).onSnapshot(snaps => {\n      const posts = [];\n      snaps.forEach(snap => posts.push(snap.data()));\n      setQuestions(posts);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"forumQnsCom-tableGrid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    id: \"forumQnsCom-tableHeader\",\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, \"My Question\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, \"Posted Date/Time\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 74\n    }\n  }, \"No. of\"), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 136\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCommentDots,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 183\n    }\n  }))), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, \"Edit Question\"), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Header ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, \"Delete Question\")), questions.map(post => /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-center\",\n    key: post.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, post.entry), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, post.dateTime), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, post.noOfComments), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => [setShowEditQuestionModal(true), setToBeEdited(post.id)],\n    className: \"forumQnsCom-DataBtn\",\n    size: \"small\",\n    style: {\n      marginTop: \"-5%\",\n      marginBottom: \"-5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEdit,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 208\n    }\n  }))), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"forumQnsCom-Data ion-text-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => [setDeleteAlert({\n      alert: true,\n      loading: false\n    }), setToBeDeleted(post.id)],\n    className: \"forumQnsCom-DataBtn\",\n    size: \"small\",\n    style: {\n      marginTop: \"-5%\",\n      marginBottom: \"-5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTrash,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 226\n    }\n  })))))), /*#__PURE__*/React.createElement(IonModal, {\n    isOpen: showEditQuestionModal,\n    cssClass: \"post-question-modal\",\n    onDidDismiss: () => setShowEditQuestionModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"postQns-modal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    style: {\n      paddingTop: '1%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    id: \"postQns-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, \"Edit Question\")), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"postQns-modal-inputArea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonTextarea, {\n    rows: 11,\n    contentEditable: true,\n    value: entry,\n    onIonChange: e => setEntry(e.detail.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-close-button\",\n    fill: \"outline\",\n    onClick: () => setShowEditQuestionModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, \"CANCEL\"), /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-post-button\",\n    onClick: () => handleEdit(toBeEdited.toString()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, \"UPDATE\"))))), /*#__PURE__*/React.createElement(IonAlert, {\n    isOpen: deleteAlert.alert,\n    cssClass: \"alertBox\",\n    header: 'Delete Question',\n    message: 'Are you sure you want to delete the question?',\n    buttons: [{\n      text: 'NO',\n      handler: () => setDeleteAlert({\n        alert: false,\n        loading: false\n      })\n    }, {\n      text: 'YES',\n      handler: () => handleDelete(toBeDeleted.toString())\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: deleteAlert.loading || loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default ForumQuestions;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/components/Forum/ForumQuestions.tsx"],"names":["IonAlert","IonButton","IonCol","IonContent","IonGrid","IonItemDivider","IonLabel","IonLoading","IonModal","IonRow","IonTextarea","React","useEffect","useState","FontAwesomeIcon","faCommentDots","faEdit","faTrash","db","useAuth","ForumQuestions","props","userID","loading","setLoading","deleteAlert","setDeleteAlert","alert","showEditQuestionModal","setShowEditQuestionModal","questions","setQuestions","entry","setEntry","toBeEdited","setToBeEdited","toBeDeleted","setToBeDeleted","handleDelete","postId","collection","doc","update","deleted","e","console","log","handleEdit","where","onSnapshot","snaps","posts","forEach","snap","push","data","map","post","id","dateTime","noOfComments","marginTop","marginBottom","paddingTop","detail","value","toString","text","handler"],"mappings":"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","sourcesContent":["import { IonAlert, IonButton, IonCol, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCommentDots, faEdit } from '@fortawesome/free-regular-svg-icons';\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport \"../../css/Global.css\";\r\nimport \"../../css/Forum.css\";\r\nimport { db } from '../../firebase';\r\nimport { useAuth } from '../../modules/auth';\r\n\r\nconst ForumQuestions: React.FC<{ questions: any[] }> = (props) => {\r\n    const { userID } = useAuth();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [deleteAlert, setDeleteAlert] = useState({ alert: false, loading: false });\r\n    const [showEditQuestionModal, setShowEditQuestionModal] = useState(false);\r\n    const [questions, setQuestions] = useState([]);\r\n    const [entry, setEntry] = useState(\"\");\r\n    const [toBeEdited, setToBeEdited] = useState(\"\");\r\n    const [toBeDeleted, setToBeDeleted] = useState(\"\");\r\n\r\n    const handleDelete = async (postId: string) => {\r\n        try {\r\n            setDeleteAlert({ alert: false, loading: true });\r\n            await db.collection('Forum').doc(userID).collection('Questions').doc(postId).update({\r\n                deleted: true\r\n            });\r\n        } catch(e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setDeleteAlert({ alert: false, loading: false });\r\n        }\r\n    }\r\n\r\n    const handleEdit = async (postId: string) => {\r\n        try {\r\n            setLoading(true);\r\n            await db.collection('Forum').doc(userID).collection('Questions').doc(postId).update({\r\n                entry: entry\r\n            });\r\n        } catch(e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setShowEditQuestionModal(false);\r\n            setLoading(false);\r\n            setEntry(\"\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        return db.collection('Forum').doc(userID).collection('Questions').where(\"deleted\", \"==\", false).onSnapshot(snaps => {\r\n            const posts: any = [];\r\n            \r\n            snaps.forEach(snap => posts.push(snap.data()));\r\n            setQuestions(posts);\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <IonGrid id=\"forumQnsCom-tableGrid\">\r\n                <IonRow id=\"forumQnsCom-tableHeader\" className=\"ion-justify-content-center\">\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">My Question</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Posted Date/Time</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\"><IonRow className=\"ion-justify-content-center\">No. of</IonRow><IonRow className=\"ion-justify-content-center\"><FontAwesomeIcon icon={faCommentDots} size=\"lg\" /></IonRow></IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Edit Question</IonCol>\r\n                    <IonCol className=\"forumQnsCom-Header ion-text-wrap\">Delete Question</IonCol>\r\n                </IonRow>\r\n                {questions.map((post: any) => (\r\n                    <IonRow className=\"ion-justify-content-center\" key={post.id}>\r\n                        <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.entry}</IonCol>\r\n                        <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.dateTime}</IonCol>\r\n                        <IonCol className=\"forumQnsCom-Data ion-text-wrap\">{post.noOfComments}</IonCol>\r\n                        <IonCol className=\"forumQnsCom-Data ion-text-wrap\">\r\n                            {/* <Forum_EditQuestionModal /> */}\r\n                            <IonButton onClick={() => [setShowEditQuestionModal(true), setToBeEdited(post.id)]} className=\"forumQnsCom-DataBtn\" size=\"small\" style={{ marginTop: \"-5%\", marginBottom: \"-5%\" }}><FontAwesomeIcon icon={faEdit} size=\"lg\" /></IonButton>\r\n                        </IonCol>\r\n                        <IonCol className=\"forumQnsCom-Data ion-text-wrap\">\r\n                            {/* <Forum_DeleteQuestion /> */}\r\n                            <IonButton onClick={() => [setDeleteAlert({ alert: true, loading: false }), setToBeDeleted(post.id)]} className=\"forumQnsCom-DataBtn\" size=\"small\" style={{ marginTop: \"-5%\", marginBottom: \"-5%\" }}><FontAwesomeIcon icon={faTrash} size=\"lg\" /></IonButton>\r\n                        </IonCol>\r\n                    </IonRow>\r\n                ))}\r\n            </IonGrid>\r\n            <IonModal isOpen={showEditQuestionModal} cssClass='post-question-modal' onDidDismiss={() => setShowEditQuestionModal(false)}>\r\n                <IonContent>\r\n                    <IonGrid id=\"postQns-modal-container\">\r\n                        <IonRow style={{paddingTop: '1%'}}>\r\n                            <IonLabel id=\"postQns-title\">Edit Question</IonLabel>\r\n                        </IonRow>\r\n                        <IonItemDivider />\r\n                        <IonRow id=\"postQns-modal-inputArea\">\r\n                            <IonTextarea rows={11} contentEditable={true} value={entry} onIonChange={e => setEntry(e.detail.value!)} required></IonTextarea>\r\n                        </IonRow>\r\n                        <IonRow className=\"ion-justify-content-around\">\r\n                            <IonButton id=\"postQns-close-button\" fill=\"outline\" onClick={() => setShowEditQuestionModal(false)}>CANCEL</IonButton>\r\n                            <IonButton id=\"postQns-post-button\" onClick={() => handleEdit(toBeEdited.toString())}>UPDATE</IonButton>\r\n                        </IonRow>\r\n                    </IonGrid>\r\n                </IonContent>\r\n            </IonModal>\r\n            <IonAlert\r\n                isOpen={deleteAlert.alert}\r\n                cssClass='alertBox' header={'Delete Question'}\r\n                message={'Are you sure you want to delete the question?'}\r\n                buttons={[\r\n                    {\r\n                        text: 'NO',\r\n                        handler: () => setDeleteAlert({ alert: false, loading: false })\r\n                    }, {\r\n                        text: 'YES',\r\n                        handler: () => handleDelete(toBeDeleted.toString())\r\n                    }]}\r\n            ></IonAlert>\r\n            <IonLoading isOpen={deleteAlert.loading || loading} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ForumQuestions;"]},"metadata":{},"sourceType":"module"}