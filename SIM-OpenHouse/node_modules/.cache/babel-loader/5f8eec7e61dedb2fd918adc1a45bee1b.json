{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{IonAlert,IonButton,IonCol,IonContent,IonGrid,IonHeader,IonInput,IonItem,IonLoading,IonModal,IonPage,IonRow,IonSelect,IonSelectOption}from'@ionic/react';import React,{useEffect,useRef,useState}from'react';import{useForm}from'react-hook-form';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faAddressCard,faEnvelope,faMobileAlt,faBirthdayCake,faUserGraduate,faGlobe,faLock,faGift}from'@fortawesome/free-solid-svg-icons';import{faEdit}from'@fortawesome/free-regular-svg-icons';import firebase from'firebase';import'../css/Global.css';import'../css/MyProfile.css';import TopNav from'../components/TopNav';import{db}from'../firebase';import{useAuth}from'../modules/auth';import{auth}from'../firebase';import QRCode from\"qrcode.react\";var MyProfile=function MyProfile(){var _useAuth=useAuth(),userID=_useAuth.userID;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,watch=_useForm.watch;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),student=_useState4[0],setStudent=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),fieldDisable=_useState6[0],setFieldDisable=_useState6[1];var _useState7=useState({profileNav:true,editProfile:true,changePassword:true}),_useState8=_slicedToArray(_useState7,2),profileUi=_useState8[0],setProfileUi=_useState8[1];var _useState9=useState({success:false,error:false}),_useState10=_slicedToArray(_useState9,2),alert=_useState10[0],setAlert=_useState10[1];{/* Edit Profile */}var editMode=function editMode(){setFieldDisable(false);setProfileUi({profileNav:false,editProfile:false,changePassword:false});};var handleEditProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return db.collection('Students').doc(userID).update({contactNo:data.contactNo,highestQualification:data.highestQualification});case 4:setAlert({success:true,error:false});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0));case 10:_context.prev=10;setLoading(false);return _context.finish(10);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,7,10,13]]);}));return function handleEditProfile(_x){return _ref.apply(this,arguments);};}();{/* Change Password Modal & Alert */}var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),changePasswordModal=_useState12[0],setChangePasswordModal=_useState12[1];var currentPasswordRef=useRef({});var newPasswordRef=useRef({});currentPasswordRef.current=watch(\"currentPassword\",\"\");newPasswordRef.current=watch(\"newPassword\",\"\");var handleChangePassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var user,cred;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setLoading(true);if(!(data.currentPassword&&data.newPassword)){_context3.next=10;break;}user=auth.currentUser;cred=firebase.auth.EmailAuthProvider.credential(user===null||user===void 0?void 0:user.email,data.currentPassword);_context3.next=7;return user===null||user===void 0?void 0:user.reauthenticateWithCredential(cred).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uCred){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"reauthenticated\",uCred);_context2.next=3;return user.updatePassword(data.newPassword).then(function(){return console.log(\"password updated\");});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}());case 7:setAlert({success:true,error:false});_context3.next=11;break;case 10:throw data;case 11:_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);setAlert({success:false,error:true});return _context3.abrupt(\"return\",console.log(_context3.t0));case 17:_context3.prev=17;setLoading(false);return _context3.finish(17);case 20:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13,17,20]]);}));return function handleChangePassword(_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){var studentInfo={};db.collection('Games').doc(userID).get().then(function(ref){if(ref.exists){var _ref$data;studentInfo.points=(_ref$data=ref.data())===null||_ref$data===void 0?void 0:_ref$data.points;}});return db.collection('Students').doc(userID).onSnapshot(function(student){if(student.exists){var _student$data,_student$data2,_student$data3,_student$data4,_student$data5,_student$data6,_student$data7;studentInfo.id=student.id;studentInfo.firstName=(_student$data=student.data())===null||_student$data===void 0?void 0:_student$data.firstName;studentInfo.lastName=(_student$data2=student.data())===null||_student$data2===void 0?void 0:_student$data2.lastName;studentInfo.dob=(_student$data3=student.data())===null||_student$data3===void 0?void 0:_student$data3.dob;studentInfo.email=(_student$data4=student.data())===null||_student$data4===void 0?void 0:_student$data4.email;studentInfo.contact=(_student$data5=student.data())===null||_student$data5===void 0?void 0:_student$data5.contactNo;studentInfo.nationality=(_student$data6=student.data())===null||_student$data6===void 0?void 0:_student$data6.nationality;studentInfo.highestQual=(_student$data7=student.data())===null||_student$data7===void 0?void 0:_student$data7.highestQualification;}setTimeout(function(){setStudent(studentInfo);setLoading(false);},500);});},[]);//console.log(student)\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IonModal,{isOpen:changePasswordModal,cssClass:\"editPasswordModal\"},/*#__PURE__*/React.createElement(IonContent,{fullscreen:true,className:\"editPasswordModalContent\"},/*#__PURE__*/React.createElement(IonGrid,{id:\"editPasswordModalGrid\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(handleChangePassword)},/*#__PURE__*/React.createElement(IonRow,{className:\"editPasswordModalRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",sizeSm:\"12\",className:\"editPasswordModalCol\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonItem,{className:\"editPasswordModalItem\"},/*#__PURE__*/React.createElement(IonInput,{type:\"password\",className:\"passwordInput\",name:\"currentPassword\",placeholder:\"Current Password\",ref:register({required:true,minLength:8,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[.,/<>#^~`@$!%*?&])[A-Za-z\\d.,/<>#~`^@$!%*?&]{8,}$/})})),errors.currentPassword&&errors.currentPassword.type===\"required\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Current Password is required!\"),errors.currentPassword&&errors.currentPassword.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character\"),errors.currentPassword&&errors.currentPassword.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character\"))),/*#__PURE__*/React.createElement(IonRow,{className:\"editPasswordModalRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",sizeSm:\"12\",className:\"editPasswordModalCol\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonItem,{className:\"editPasswordModalItem\"},/*#__PURE__*/React.createElement(IonInput,{type:\"password\",className:\"passwordInput\",name:\"newPassword\",placeholder:\"New Password\",ref:register({required:true,minLength:8,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[.,/<>#^~`@$!%*?&])[A-Za-z\\d.,/<>#~`^@$!%*?&]{8,}$/,validate:function validate(newPassword){return newPassword!==currentPasswordRef.current;}})})),errors.newPassword&&errors.newPassword.type===\"required\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"New Password is required!\"),errors.newPassword&&errors.newPassword.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"New Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character\"),errors.newPassword&&errors.newPassword.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"New Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character\"),errors.newPassword&&errors.newPassword.type===\"validate\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"New Password cannot be the same as Current Password!\"))),/*#__PURE__*/React.createElement(IonRow,{className:\"editPasswordModalRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",sizeSm:\"12\",className:\"editPasswordModalCol\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonItem,{className:\"editPasswordModalItem\"},/*#__PURE__*/React.createElement(IonInput,{type:\"password\",className:\"passwordInput\",name:\"confirmNewPassword\",placeholder:\"Confirm New Password\",ref:register({required:true,minLength:8,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[.,/<>#^~`@$!%*?&])[A-Za-z\\d.,/<>#~`^@$!%*?&]{8,}$/,validate:function validate(confirmNewPassword){return confirmNewPassword===newPasswordRef.current;}})})),errors.confirmNewPassword&&errors.confirmNewPassword.type===\"required\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Confirm New Password is required!\"),errors.confirmNewPassword&&errors.confirmNewPassword.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Passwords do not match!\"),errors.confirmNewPassword&&errors.confirmNewPassword.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Passwords do not match!\"),errors.confirmNewPassword&&errors.confirmNewPassword.type===\"validate\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Passwords do not match!\"))),/*#__PURE__*/React.createElement(IonRow,{class:\"ion-align-items-center\",style:{marginTop:\"5%\"}},/*#__PURE__*/React.createElement(IonCol,{size:\"4\",sizeSm:\"4\",class:\"ion-text-right\"},/*#__PURE__*/React.createElement(IonButton,{className:\"editPasswordBtn\",onClick:function onClick(){return setChangePasswordModal(false);}},\"CANCEL\")),/*#__PURE__*/React.createElement(IonCol,{size:\"8\",sizeSm:\"8\",class:\"ion-text-center\"},/*#__PURE__*/React.createElement(IonButton,{className:\"editPasswordBtn\",type:\"submit\"},\"CHANGE PASSWORD\"))))))),/*#__PURE__*/React.createElement(IonAlert,{isOpen:alert.success,onDidDismiss:function onDidDismiss(){return setAlert({success:false,error:false});},cssClass:\"alertBox\",mode:\"md\",header:'Successfully Changed Password',message:'Password has been successfully changed!',buttons:[{text:'Close',handler:function handler(){/* reset({\r\n                                currentPassword: \"\",\r\n                                newPassword: \"\",\r\n                                confirmNewPassword: \"\"\r\n                            }); */setChangePasswordModal(false);}}]}),/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,profileUi.profileNav?/*#__PURE__*/React.createElement(TopNav,{title:\"My Profile\",route:\"/u/home\",backarrow:true,hamburger:true}):/*#__PURE__*/React.createElement(TopNav,{title:\"Edit My Profile\",route:\"/u/home\",backarrow:false,hamburger:true})),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true},/*#__PURE__*/React.createElement(IonGrid,{id:\"profileGrid\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(handleEditProfile)},profileUi.editProfile?/*#__PURE__*/React.createElement(IonRow,{id:\"editProfileBtnRow\",class:\"ion-align-items-right\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",sizeSm:\"12\",class:\"ion-text-right\",id:\"editProfileBtnCol\"},/*#__PURE__*/React.createElement(IonButton,{id:\"editProfileBtn\",onClick:editMode},\"EDIT PROFILE\"))):null,/*#__PURE__*/React.createElement(IonRow,{id:\"qrCodeRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",sizeSm:\"12\",class:\"ion-text-center\",id:\"qrCodeCol\"},/*#__PURE__*/React.createElement(\"span\",{id:\"qrCode\"},/*#__PURE__*/React.createElement(QRCode,{value:\"\".concat(student.email,\",\").concat(student.firstName,\",\").concat(student.lastName)})))),/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faAddressCard,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"5\",sizeSm:\"5\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.firstName,name:\"firstName\",readonly:true,disabled:true,className:\"readOnlyIonInput\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"5\",sizeSm:\"5\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.lastName,name:\"lastName\",readonly:true,disabled:true,className:\"readOnlyIonInput\"}))),/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faEnvelope,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"10\",sizeSm:\"10\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.email,name:\"email\",readonly:true,disabled:true,className:\"readOnlyIonInput\"}))),/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faMobileAlt,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"10\",sizeSm:\"10\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.contact,type:\"tel\",name:\"contactNo\",readonly:fieldDisable,disabled:fieldDisable,className:\"readOnlyIonInput\",id:\"contactNoField\",minlength:8,maxlength:8,ref:register({required:true,minLength:8,maxLength:8,pattern:/(6|8|9)\\d{7}/,min:8,max:8})}),errors.contactNo&&errors.contactNo.type===\"required\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Contact number is required!\"),errors.contactNo&&errors.contactNo.type===\"minLength\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Contact number consist of only 8 digits\"),errors.contactNo&&errors.contactNo.type===\"maxLength\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Contact number consist of only 8 digits\"),errors.contactNo&&errors.contactNo.type===\"pattern\"&&/*#__PURE__*/React.createElement(\"p\",{className:\"errorMsg\"},\"Please enter a valid Contact No.\"))),/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faBirthdayCake,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"10\",sizeSm:\"10\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.dob,name:\"dob\",readonly:true,disabled:true,className:\"readOnlyIonInput\"}))),/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faUserGraduate,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"10\",sizeSm:\"10\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonSelect,{value:student.highestQual,id:\"highestQualSelect\",className:\"readOnlyIonInput\",name:\"highestQualification\",disabled:fieldDisable,ref:register({required:true})},/*#__PURE__*/React.createElement(IonSelectOption,{value:\"'A' Level\",className:\"highestQualSelectOption\"},\"'A' Level\"),/*#__PURE__*/React.createElement(IonSelectOption,{value:\"'O' Level\",className:\"highestQualSelectOption\"},\"'O' Level\"),/*#__PURE__*/React.createElement(IonSelectOption,{value:\"Degree\",className:\"highestQualSelectOption\"},\"Degree\"),/*#__PURE__*/React.createElement(IonSelectOption,{value:\"Diploma\",className:\"highestQualSelectOption\"},\"Diploma\")))),/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faGlobe,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"10\",sizeSm:\"10\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.nationality,name:\"nationality\",readonly:true,disabled:true,className:\"readOnlyIonInput\"}))),profileUi.editProfile?/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faGift,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"10\",sizeSm:\"10\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{value:student.points,name:\"pointsEarned\",readonly:true,disabled:true,className:\"readOnlyIonInput\"}))):null,profileUi.changePassword?/*#__PURE__*/React.createElement(IonRow,{className:\"profileRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\",className:\"profileIconCol\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faLock,size:\"lg\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"8\",sizeSm:\"8\",class:\"ion-text-left\"},/*#__PURE__*/React.createElement(IonInput,{type:\"password\",value:\"password\",name:\"password\",readonly:true,disabled:true,className:\"readOnlyIonInput\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"2\",sizeSm:\"2\",class:\"ion-text-center\"},/*#__PURE__*/React.createElement(IonButton,{id:\"editPasswordBtn\",fill:\"clear\",size:\"default\",onClick:function onClick(){return setChangePasswordModal(true);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faEdit,size:\"lg\"})))):/*#__PURE__*/React.createElement(IonRow,{id:\"editProfileBtnRow\",class:\"ion-align-items-center\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",sizeSm:\"12\",class:\"ion-text-center\",id:\"saveEditProfileBtnCol\"},/*#__PURE__*/React.createElement(IonAlert,{isOpen:alert.success,onDidDismiss:function onDidDismiss(){return setAlert({success:false,error:false});},cssClass:\"alertBox\",header:'Profile Updated',message:'Your profile has been successfully updated!',buttons:[{text:'CLOSE',handler:function handler(){setFieldDisable(true);setProfileUi({profileNav:true,editProfile:true,changePassword:true});}}]}),/*#__PURE__*/React.createElement(IonAlert,{isOpen:alert.error,onDidDismiss:function onDidDismiss(){return setAlert({success:false,error:false});},cssClass:\"alertBox\",header:'Error Occurred!',message:'Please enter the correct information for the fields.',buttons:['OK']}),/*#__PURE__*/React.createElement(IonButton,{id:\"saveEditProfileBtn\",type:\"submit\"},\"SAVE\"))))),/*#__PURE__*/React.createElement(IonLoading,{isOpen:loading}))));};export default MyProfile;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/pages/MyProfile.tsx"],"names":["IonAlert","IonButton","IonCol","IonContent","IonGrid","IonHeader","IonInput","IonItem","IonLoading","IonModal","IonPage","IonRow","IonSelect","IonSelectOption","React","useEffect","useRef","useState","useForm","FontAwesomeIcon","faAddressCard","faEnvelope","faMobileAlt","faBirthdayCake","faUserGraduate","faGlobe","faLock","faGift","faEdit","firebase","TopNav","db","useAuth","auth","QRCode","MyProfile","userID","register","handleSubmit","errors","watch","loading","setLoading","student","setStudent","fieldDisable","setFieldDisable","profileNav","editProfile","changePassword","profileUi","setProfileUi","success","error","alert","setAlert","editMode","handleEditProfile","data","collection","doc","update","contactNo","highestQualification","console","log","changePasswordModal","setChangePasswordModal","currentPasswordRef","newPasswordRef","current","handleChangePassword","currentPassword","newPassword","user","currentUser","cred","EmailAuthProvider","credential","email","reauthenticateWithCredential","then","uCred","updatePassword","studentInfo","get","ref","exists","points","onSnapshot","id","firstName","lastName","dob","contact","nationality","highestQual","setTimeout","required","minLength","pattern","type","validate","confirmNewPassword","marginTop","text","handler","maxLength","min","max"],"mappings":"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","sourcesContent":["import { IonAlert, IonButton, IonCol, IonContent, IonGrid, IonHeader, IonInput, IonItem, IonLoading, IonModal, IonPage, IonRow, IonSelect, IonSelectOption } from '@ionic/react';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faAddressCard, faEnvelope, faMobileAlt, faBirthdayCake, faUserGraduate, faGlobe, faLock, faGift } from '@fortawesome/free-solid-svg-icons';\r\nimport { faEdit } from '@fortawesome/free-regular-svg-icons';\r\nimport firebase from 'firebase';\r\n\r\nimport '../css/Global.css';\r\nimport '../css/MyProfile.css';\r\nimport TopNav from '../components/TopNav';\r\nimport { db } from '../firebase';\r\nimport { useAuth } from '../modules/auth';\r\nimport { auth } from '../firebase';\r\nimport QRCode from \"qrcode.react\";\r\n\r\n\r\nconst MyProfile: React.FC = () => {\r\n    const { userID } = useAuth();\r\n    const { register, handleSubmit, errors, watch } = useForm();\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [student, setStudent] = useState<any>({});\r\n\r\n    const [fieldDisable, setFieldDisable] = useState(true);\r\n    const [profileUi, setProfileUi] = useState({ profileNav: true, editProfile: true, changePassword: true });\r\n    const [alert, setAlert] = useState({ success: false, error: false });\r\n\r\n    {/* Edit Profile */ }\r\n    const editMode = () => {\r\n        setFieldDisable(false);\r\n        setProfileUi({ profileNav: false, editProfile: false, changePassword: false });\r\n    };\r\n\r\n    const handleEditProfile = async (data: any) => {\r\n        try {\r\n            setLoading(true);\r\n            await db.collection('Students').doc(userID).update({\r\n                contactNo: data.contactNo,\r\n                highestQualification: data.highestQualification,\r\n            });\r\n            setAlert({ success: true, error: false });\r\n        } catch (e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    {/* Change Password Modal & Alert */ }\r\n    const [changePasswordModal, setChangePasswordModal] = useState(false);\r\n\r\n    const currentPasswordRef = useRef({});\r\n    const newPasswordRef = useRef({});\r\n    currentPasswordRef.current = watch(\"currentPassword\", \"\");\r\n    newPasswordRef.current = watch(\"newPassword\", \"\");\r\n\r\n    const handleChangePassword = async (data: any) => {\r\n        try {\r\n            setLoading(true);\r\n            if (data.currentPassword && data.newPassword) {\r\n                const user = auth.currentUser;\r\n                const cred = firebase.auth.EmailAuthProvider.credential(user?.email!, data.currentPassword);\r\n                await user?.reauthenticateWithCredential(cred).then(async (uCred) => {\r\n                    console.log(\"reauthenticated\", uCred)\r\n                    await user!.updatePassword(data.newPassword).then(() => console.log(\"password updated\"));\r\n                });\r\n                setAlert({ success: true, error: false });\r\n            } else {\r\n                throw data;\r\n            }\r\n        } catch (e) {\r\n            setAlert({ success: false, error: true });\r\n            return console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let studentInfo: any = {}\r\n\r\n        db.collection('Games').doc(userID).get().then(ref => {\r\n            if (ref.exists) {\r\n                studentInfo.points = ref.data()?.points;\r\n            }\r\n        });\r\n\r\n        return db.collection('Students').doc(userID).onSnapshot(student => {\r\n            if (student.exists) {\r\n                studentInfo.id = student.id;\r\n                studentInfo.firstName = student.data()?.firstName;\r\n                studentInfo.lastName = student.data()?.lastName;\r\n                studentInfo.dob = student.data()?.dob;\r\n                studentInfo.email = student.data()?.email;\r\n                studentInfo.contact = student.data()?.contactNo;\r\n                studentInfo.nationality = student.data()?.nationality;\r\n                studentInfo.highestQual = student.data()?.highestQualification;\r\n            }\r\n\r\n            setTimeout(() => {\r\n                setStudent(studentInfo);\r\n                setLoading(false);\r\n            }, 500);\r\n        });\r\n    }, []);\r\n\r\n    //console.log(student)\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {/* Change Password Modal */}\r\n            <IonModal isOpen={changePasswordModal} cssClass='editPasswordModal'>\r\n                <IonContent fullscreen className=\"editPasswordModalContent\">\r\n                    <IonGrid id=\"editPasswordModalGrid\">\r\n                        <form onSubmit={handleSubmit(handleChangePassword)}>\r\n\r\n                            {/* Current Password */}\r\n                            <IonRow className=\"editPasswordModalRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"12\" sizeSm=\"12\" className=\"editPasswordModalCol\" class=\"ion-text-left\">\r\n                                    <IonItem className=\"editPasswordModalItem\">\r\n                                        <IonInput type=\"password\" className=\"passwordInput\" name=\"currentPassword\" placeholder=\"Current Password\" ref={register({ required: true, minLength: 8, pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[.,/<>#^~`@$!%*?&])[A-Za-z\\d.,/<>#~`^@$!%*?&]{8,}$/ })} />\r\n                                    </IonItem>\r\n                                    {errors.currentPassword && errors.currentPassword.type === \"required\" && <p className=\"errorMsg\">Current Password is required!</p>}\r\n                                    {errors.currentPassword && errors.currentPassword.type === \"minLength\" && <p className=\"errorMsg\">Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character</p>}\r\n                                    {errors.currentPassword && errors.currentPassword.type === \"pattern\" && <p className=\"errorMsg\">Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character</p>}\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* New Password */}\r\n                            <IonRow className=\"editPasswordModalRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"12\" sizeSm=\"12\" className=\"editPasswordModalCol\" class=\"ion-text-left\">\r\n                                    <IonItem className=\"editPasswordModalItem\">\r\n                                        <IonInput type=\"password\" className=\"passwordInput\" name=\"newPassword\" placeholder=\"New Password\" ref={register({ required: true, minLength: 8, pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[.,/<>#^~`@$!%*?&])[A-Za-z\\d.,/<>#~`^@$!%*?&]{8,}$/, validate: (newPassword) => newPassword !== currentPasswordRef.current })} />\r\n                                    </IonItem>\r\n                                    {errors.newPassword && errors.newPassword.type === \"required\" && <p className=\"errorMsg\">New Password is required!</p>}\r\n                                    {errors.newPassword && errors.newPassword.type === \"minLength\" && <p className=\"errorMsg\">New Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character</p>}\r\n                                    {errors.newPassword && errors.newPassword.type === \"pattern\" && <p className=\"errorMsg\">New Password has to be at least 8 characters and must contain 1 uppercase, 1 lowercase, 1 number and 1 special character</p>}\r\n                                    {errors.newPassword && errors.newPassword.type === \"validate\" && <p className=\"errorMsg\">New Password cannot be the same as Current Password!</p>}\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Confirm New Password */}\r\n                            <IonRow className=\"editPasswordModalRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"12\" sizeSm=\"12\" className=\"editPasswordModalCol\" class=\"ion-text-left\">\r\n                                    <IonItem className=\"editPasswordModalItem\">\r\n                                        <IonInput type=\"password\" className=\"passwordInput\" name=\"confirmNewPassword\" placeholder=\"Confirm New Password\" ref={register({ required: true, minLength: 8, pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[.,/<>#^~`@$!%*?&])[A-Za-z\\d.,/<>#~`^@$!%*?&]{8,}$/, validate: (confirmNewPassword) => confirmNewPassword === newPasswordRef.current })} />\r\n                                    </IonItem>\r\n                                    {errors.confirmNewPassword && errors.confirmNewPassword.type === \"required\" && <p className=\"errorMsg\">Confirm New Password is required!</p>}\r\n                                    {errors.confirmNewPassword && errors.confirmNewPassword.type === \"minLength\" && <p className=\"errorMsg\">Passwords do not match!</p>}\r\n                                    {errors.confirmNewPassword && errors.confirmNewPassword.type === \"pattern\" && <p className=\"errorMsg\">Passwords do not match!</p>}\r\n                                    {errors.confirmNewPassword && errors.confirmNewPassword.type === \"validate\" && <p className=\"errorMsg\">Passwords do not match!</p>}\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            <IonRow class=\"ion-align-items-center\" style={{ marginTop: \"5%\" }}>\r\n                                <IonCol size=\"4\" sizeSm=\"4\" class=\"ion-text-right\">\r\n                                    <IonButton className=\"editPasswordBtn\" onClick={() => setChangePasswordModal(false)}>CANCEL</IonButton>\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"8\" sizeSm=\"8\" class=\"ion-text-center\">\r\n                                    <IonButton className=\"editPasswordBtn\" type=\"submit\">CHANGE PASSWORD</IonButton>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                        </form>\r\n                    </IonGrid>\r\n\r\n                </IonContent>\r\n            </IonModal>\r\n\r\n            <IonAlert\r\n                isOpen={alert.success}\r\n                onDidDismiss={() => setAlert({ success: false, error: false })}\r\n                cssClass='alertBox'\r\n                mode='md'\r\n                header={'Successfully Changed Password'}\r\n                message={'Password has been successfully changed!'}\r\n                buttons={[\r\n                    {\r\n                        text: 'Close',\r\n                        handler: () => {\r\n                            /* reset({\r\n                                currentPassword: \"\",\r\n                                newPassword: \"\",\r\n                                confirmNewPassword: \"\"\r\n                            }); */\r\n                            setChangePasswordModal(false);\r\n                        }\r\n                    }\r\n                ]}\r\n            ></IonAlert>\r\n\r\n            <IonPage>\r\n                <IonHeader>\r\n                    {profileUi.profileNav ?\r\n                        <TopNav title=\"My Profile\" route='/u/home' backarrow={true} hamburger={true} />\r\n                        :\r\n                        <TopNav title=\"Edit My Profile\" route='/u/home' backarrow={false} hamburger={true} />\r\n                    }\r\n                </IonHeader>\r\n\r\n                <IonContent fullscreen={true}>\r\n                    <IonGrid id=\"profileGrid\">\r\n                        <form onSubmit={handleSubmit(handleEditProfile)}>\r\n                            {/* Edit Profile Button */}\r\n                            {profileUi.editProfile ? (\r\n                                <IonRow id=\"editProfileBtnRow\" class=\"ion-align-items-right\">\r\n                                    <IonCol size=\"12\" sizeSm=\"12\" class=\"ion-text-right\" id=\"editProfileBtnCol\">\r\n                                        <IonButton id=\"editProfileBtn\" onClick={editMode}>EDIT PROFILE</IonButton>\r\n                                    </IonCol>\r\n                                </IonRow>\r\n                            ) : null\r\n                            }\r\n\r\n                            {/* Generated QR Code */}\r\n                            <IonRow id=\"qrCodeRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"12\" sizeSm=\"12\" class=\"ion-text-center\" id=\"qrCodeCol\">\r\n                                    <span id=\"qrCode\"><QRCode value={`${student.email},${student.firstName},${student.lastName}`} /></span>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Name */}\r\n                            <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                    <FontAwesomeIcon icon={faAddressCard} size=\"lg\" />\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"5\" sizeSm=\"5\" class=\"ion-text-left\">\r\n                                    <IonInput value={student.firstName} name=\"firstName\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"5\" sizeSm=\"5\" class=\"ion-text-left\">\r\n                                    <IonInput value={student.lastName} name=\"lastName\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Email */}\r\n                            <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                    <FontAwesomeIcon icon={faEnvelope} size=\"lg\" />\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"10\" sizeSm=\"10\" class=\"ion-text-left\">\r\n                                    <IonInput value={student.email} name=\"email\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Contact No. */}\r\n                            <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                    <FontAwesomeIcon icon={faMobileAlt} size=\"lg\" />\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"10\" sizeSm=\"10\" class=\"ion-text-left\">\r\n                                    <IonInput value={student.contact} type=\"tel\" name=\"contactNo\" readonly={fieldDisable} disabled={fieldDisable} className=\"readOnlyIonInput\" id=\"contactNoField\" minlength={8} maxlength={8} ref={register({ required: true, minLength: 8, maxLength: 8, pattern: /(6|8|9)\\d{7}/, min: 8, max: 8 })}></IonInput>\r\n                                    {errors.contactNo && errors.contactNo.type === \"required\" && <p className=\"errorMsg\">Contact number is required!</p>}\r\n                                    {errors.contactNo && errors.contactNo.type === \"minLength\" && <p className=\"errorMsg\">Contact number consist of only 8 digits</p>}\r\n                                    {errors.contactNo && errors.contactNo.type === \"maxLength\" && <p className=\"errorMsg\">Contact number consist of only 8 digits</p>}\r\n                                    {errors.contactNo && errors.contactNo.type === \"pattern\" && <p className=\"errorMsg\">Please enter a valid Contact No.</p>}\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* DOB */}\r\n                            <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                    <FontAwesomeIcon icon={faBirthdayCake} size=\"lg\" />\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"10\" sizeSm=\"10\" class=\"ion-text-left\">\r\n                                    <IonInput value={student.dob} name=\"dob\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Highest Qualification */}\r\n                            <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                    <FontAwesomeIcon icon={faUserGraduate} size=\"lg\" />\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"10\" sizeSm=\"10\" class=\"ion-text-left\">\r\n                                    <IonSelect value={student.highestQual} id=\"highestQualSelect\" className=\"readOnlyIonInput\" name=\"highestQualification\" disabled={fieldDisable} ref={register({ required: true })}>\r\n                                        <IonSelectOption value=\"'A' Level\" className=\"highestQualSelectOption\">'A' Level</IonSelectOption>\r\n                                        <IonSelectOption value=\"'O' Level\" className=\"highestQualSelectOption\">'O' Level</IonSelectOption>\r\n                                        <IonSelectOption value=\"Degree\" className=\"highestQualSelectOption\">Degree</IonSelectOption>\r\n                                        <IonSelectOption value=\"Diploma\" className=\"highestQualSelectOption\">Diploma</IonSelectOption>\r\n                                    </IonSelect>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Nationality */}\r\n                            <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                    <FontAwesomeIcon icon={faGlobe} size=\"lg\" />\r\n                                </IonCol>\r\n\r\n                                <IonCol size=\"10\" sizeSm=\"10\" class=\"ion-text-left\">\r\n                                    <IonInput value={student.nationality} name=\"nationality\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                </IonCol>\r\n                            </IonRow>\r\n\r\n                            {/* Total Points Earned */}\r\n                            {profileUi.editProfile ? (\r\n                                <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                    <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                        <FontAwesomeIcon icon={faGift} size=\"lg\" />\r\n                                    </IonCol>\r\n\r\n                                    <IonCol size=\"10\" sizeSm=\"10\" class=\"ion-text-left\">\r\n                                        <IonInput value={student.points} name=\"pointsEarned\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                    </IonCol>\r\n                                </IonRow>\r\n                            ) : null\r\n                            }\r\n\r\n\r\n                            {/* Password */}\r\n                            {profileUi.changePassword ? (\r\n                                <IonRow className=\"profileRow\" class=\"ion-align-items-center\">\r\n                                    <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\" className=\"profileIconCol\">\r\n                                        <FontAwesomeIcon icon={faLock} size=\"lg\" />\r\n                                    </IonCol>\r\n\r\n                                    <IonCol size=\"8\" sizeSm=\"8\" class=\"ion-text-left\">\r\n                                        <IonInput type=\"password\" value={\"password\"} name=\"password\" readonly={true} disabled={true} className=\"readOnlyIonInput\"></IonInput>\r\n                                    </IonCol>\r\n\r\n                                    <IonCol size=\"2\" sizeSm=\"2\" class=\"ion-text-center\">\r\n                                        <IonButton id=\"editPasswordBtn\" fill=\"clear\" size=\"default\" onClick={() => setChangePasswordModal(true)}>\r\n                                            <FontAwesomeIcon icon={faEdit} size=\"lg\" />\r\n                                        </IonButton>\r\n                                    </IonCol>\r\n                                </IonRow>\r\n                            ) : (\r\n                                    <IonRow id=\"editProfileBtnRow\" class=\"ion-align-items-center\">\r\n                                        <IonCol size=\"12\" sizeSm=\"12\" class=\"ion-text-center\" id=\"saveEditProfileBtnCol\">\r\n                                            <IonAlert\r\n                                                isOpen={alert.success}\r\n                                                onDidDismiss={() => setAlert({ success: false, error: false })}\r\n                                                cssClass='alertBox'\r\n                                                header={'Profile Updated'}\r\n                                                message={'Your profile has been successfully updated!'}\r\n                                                buttons={[\r\n                                                    {\r\n                                                        text: 'CLOSE',\r\n                                                        handler: () => {\r\n                                                            setFieldDisable(true);\r\n                                                            setProfileUi({ profileNav: true, editProfile: true, changePassword: true });\r\n                                                        }\r\n                                                    }\r\n                                                ]}\r\n                                            />\r\n\r\n                                            <IonAlert isOpen={alert.error} onDidDismiss={() => setAlert({ success: false, error: false })} cssClass='alertBox' header={'Error Occurred!'} message={'Please enter the correct information for the fields.'} buttons={['OK']}></IonAlert>\r\n                                            <IonButton id=\"saveEditProfileBtn\" type=\"submit\">SAVE</IonButton>\r\n                                        </IonCol>\r\n                                    </IonRow>\r\n                                )}\r\n\r\n                        </form>\r\n                    </IonGrid>\r\n                    <IonLoading isOpen={loading} />\r\n                </IonContent>\r\n            </IonPage>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default MyProfile;"]},"metadata":{},"sourceType":"module"}