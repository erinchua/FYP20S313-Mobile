{"ast":null,"code":"var _jsxFileName = \"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\src\\\\components\\\\Forum\\\\Forum_FlagModal.tsx\";\nimport { IonButton, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\nimport React, { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFlag } from '@fortawesome/free-solid-svg-icons';\nimport \"../../css/Global.css\";\nimport \"../../css/Forum.css\";\nimport { db } from '../../firebase';\nimport { useAuth } from '../../modules/auth';\n\nconst Forum_FlagModal = props => {\n  const {\n    userID\n  } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [showFlagModal, setShowFlagModal] = useState(false);\n  const [reason, setReason] = useState(\"\");\n\n  const handleReport = async () => {\n    try {\n      setLoading(true);\n      const time = Date.now();\n      let name;\n      await db.collection('Students').doc(userID).get().then(doc => {\n        name = doc.data().firstName + \" \" + doc.data().lastName;\n      });\n      const docRef = db.collection('Forum').doc(userID).collection('Reports').doc(time.toString());\n      await docRef.set({\n        id: +docRef.id,\n        entry: reason,\n        postId: +props.postId,\n        postType: props.postType,\n        postContent: props.postContent,\n        offender: props.offender,\n        offenderId: props.offenderId,\n        reporter: name,\n        reporterId: userID,\n        dateTime: new Date(time).toLocaleString().replace(/\\//g, \"-\")\n      });\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setLoading(false);\n      setShowFlagModal(false);\n      setReason(\"\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonModal, {\n    isOpen: showFlagModal,\n    cssClass: \"post-question-modal\",\n    onDidDismiss: () => setShowFlagModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"postQns-modal-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    style: {\n      paddingTop: '1%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    id: \"postQns-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }, \"Report Post\")), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(IonRow, {\n    id: \"postQns-modal-inputArea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonTextarea, {\n    value: reason,\n    onIonChange: e => setReason(e.detail.value),\n    rows: 11,\n    contentEditable: true,\n    required: true,\n    placeholder: \"Type your reason for reporting here...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-close-button\",\n    fill: \"outline\",\n    onClick: () => setShowFlagModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, \"CANCEL\"), /*#__PURE__*/React.createElement(IonButton, {\n    id: \"postQns-post-button\",\n    onClick: handleReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, \"REPORT\"))))), /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => setShowFlagModal(true),\n    id: \"forum-question-flagBtn\",\n    size: \"small\",\n    disabled: props.disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFlag,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 126\n    }\n  })), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Forum_FlagModal;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/components/Forum/Forum_FlagModal.tsx"],"names":["IonButton","IonContent","IonGrid","IonItemDivider","IonLabel","IonLoading","IonModal","IonRow","IonTextarea","React","useState","FontAwesomeIcon","faFlag","db","useAuth","Forum_FlagModal","props","userID","loading","setLoading","showFlagModal","setShowFlagModal","reason","setReason","handleReport","time","Date","now","name","collection","doc","get","then","data","firstName","lastName","docRef","toString","set","id","entry","postId","postType","postContent","offender","offenderId","reporter","reporterId","dateTime","toLocaleString","replace","e","console","log","paddingTop","detail","value","disabled"],"mappings":"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","sourcesContent":["import { IonButton, IonContent, IonGrid, IonItemDivider, IonLabel, IonLoading, IonModal, IonRow, IonTextarea } from '@ionic/react';\r\nimport React, { useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFlag } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport \"../../css/Global.css\";\r\nimport \"../../css/Forum.css\";\r\nimport { db } from '../../firebase';\r\nimport { useAuth } from '../../modules/auth';\r\n\r\nconst Forum_FlagModal: React.FC<{ disabled: boolean, postId: number, postType: string, postContent: string, offender: string, offenderId: string }> = props => {\r\n    const { userID } = useAuth();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [showFlagModal, setShowFlagModal] = useState(false);\r\n    const [reason, setReason] = useState(\"\");\r\n\r\n    const handleReport = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const time = Date.now();\r\n            let name: string;\r\n\r\n            await db.collection('Students').doc(userID).get().then((doc: any) => {\r\n                name = doc.data().firstName + \" \" + doc.data().lastName;\r\n            });\r\n            \r\n            const docRef = db.collection('Forum').doc(userID).collection('Reports').doc(time.toString());\r\n            await docRef.set({\r\n                id: +docRef.id,\r\n                entry: reason,\r\n                postId: +props.postId,\r\n                postType: props.postType,\r\n                postContent: props.postContent,\r\n                offender: props.offender,\r\n                offenderId: props.offenderId,\r\n                reporter: name!,\r\n                reporterId: userID,\r\n                dateTime: new Date(time).toLocaleString().replace(/\\//g, \"-\")\r\n            });\r\n        } catch (e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n            setShowFlagModal(false);\r\n            setReason(\"\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <IonModal isOpen={showFlagModal} cssClass='post-question-modal' onDidDismiss={() => setShowFlagModal(false)}>\r\n            <IonContent>\r\n                <IonGrid id=\"postQns-modal-container\">\r\n                    <IonRow style={{paddingTop: '1%'}}>\r\n                        <IonLabel id=\"postQns-title\">Report Post</IonLabel>\r\n                    </IonRow>\r\n                    <IonItemDivider />\r\n                    <IonRow id=\"postQns-modal-inputArea\">\r\n                        <IonTextarea value={reason} onIonChange={e => setReason(e.detail.value!)} rows={11} contentEditable={true} required placeholder=\"Type your reason for reporting here...\"></IonTextarea>\r\n                    </IonRow>\r\n                    <IonRow className=\"ion-justify-content-around\">\r\n                        <IonButton id=\"postQns-close-button\" fill=\"outline\" onClick={() => setShowFlagModal(false)}>CANCEL</IonButton>\r\n                        <IonButton id=\"postQns-post-button\" onClick={handleReport}>REPORT</IonButton>\r\n                    </IonRow>\r\n                </IonGrid>\r\n            </IonContent>\r\n        </IonModal>\r\n\r\n        <IonButton onClick={() => setShowFlagModal(true)} id=\"forum-question-flagBtn\" size=\"small\" disabled={props.disabled}><FontAwesomeIcon icon={faFlag} size=\"sm\"/></IonButton>\r\n        <IonLoading isOpen={loading} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Forum_FlagModal;"]},"metadata":{},"sourceType":"module"}