{"ast":null,"code":"var _jsxFileName = \"D:\\\\BearBear\\\\Coding_Projects\\\\UOW-CSIT321 (FYP)\\\\FYP20S313-Mobile\\\\SIM-OpenHouse\\\\src\\\\pages\\\\Forum\\\\ForumViewQuestion.tsx\";\nimport { IonContent, IonPage, IonGrid, IonRow, IonSearchbar, IonCol, IonList, IonLabel, IonText, IonHeader, IonLoading } from '@ionic/react';\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClock, faCommentAlt } from '@fortawesome/free-regular-svg-icons';\nimport '../../css/Global.css';\nimport '../../css/Forum.css';\nimport TopNav from '../../components/TopNav';\nimport ForumRules from '../../components/Forum/ForumRules';\nimport Forum_WithComment from '../../components/Forum/Forum_WithComment';\nimport Forum_FlagModal from '../../components/Forum/Forum_FlagModal';\nimport Forum_AddCommentModal from '../../components/Forum/Forum_AddCommentModal';\nimport { db } from '../../firebase';\nimport { useAuth } from '../../modules/auth';\n\nconst ForumViewQuestion = () => {\n  const {\n    id,\n    uid\n  } = useParams();\n  const {\n    userID\n  } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [question, setQuestion] = useState({});\n  const [comment, setComment] = useState();\n\n  const handlePost = async () => {\n    try {\n      setLoading(true);\n      const time = new Date();\n      let name;\n      await db.collection('Students').doc(userID).get().then(doc => {\n        name = doc.data().firstName + \" \" + doc.data().lastName;\n      });\n      const docRef = db.collection('Forum').doc(userID).collection('Comments').doc(time.getTime().toString());\n      await docRef.set({\n        id: +docRef.id,\n        entry: comment,\n        posterName: name,\n        posterId: userID,\n        dateTime: time.toLocaleString().replace(/\\//g, \"-\"),\n        deleted: false,\n        reported: false\n      });\n      /* const increment = firebase.firestore.FieldValue.increment(1);\r\n      await db.collection('Forum').doc(\"\").collection('Questions').doc(\"\").update({\r\n          noOfComments: increment,\r\n      }); */\n    } catch (e) {\n      return console.log(e);\n    } finally {\n      setLoading(false); //setShowPostModal(false);\n      //setEntry(\"\");\n    }\n  };\n\n  useEffect(() => {\n    db.collection('Forum').doc(uid).collection('Questions').doc(id).get().then(entry => {\n      setQuestion({\n        title: entry.data().entry,\n        poster: entry.data().posterName,\n        dateTime: entry.data().dateTime,\n        commentCount: entry.data().noOfComments,\n        removed: entry.data().deleted\n      });\n    });\n    setLoading(false);\n  }, []); //console.log(question)\n\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TopNav, {\n    title: \"Forum\",\n    route: \"/u/forum\",\n    backarrow: true,\n    hamburger: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(IonContent, {\n    fullscreen: true,\n    id: \"forum-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"forum-searchbar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    size: \"10\",\n    className: \"forum-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonSearchbar, {\n    id: \"forum-searchbar\",\n    animated: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"2\",\n    className: \"forum-col ion-align-self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ForumRules, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(IonList, {\n    className: \"forum-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, question.removed === false ? /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 37\n    }\n  }, question.title)) : /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 37\n    }\n  }, \"[deleted]\"))), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question-details\",\n    id: \"forum-userName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 29\n    }\n  }, \"~ \", question.poster)), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"ion-align-items-end ion-justify-content-start\",\n    id: \"forum-question-detail-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    size: \"1\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faClock,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"6\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }, question.dateTime)), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"1\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCommentAlt,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"3\",\n    className: \"forum-col ion-align-self-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    className: \"forum-question-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, question.commentCount)), /*#__PURE__*/React.createElement(IonCol, {\n    size: \"1\",\n    className: \"ion-align-self-end forum-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Forum_FlagModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }))))), /*#__PURE__*/React.createElement(IonGrid, {\n    id: \"add-comment-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    className: \"ion-align-self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IonText, {\n    id: \"addComment-commentText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 29\n    }\n  }, \"Comments\")), /*#__PURE__*/React.createElement(IonCol, {\n    className: \"ion-align-self-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Forum_AddCommentModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(Forum_WithComment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default ForumViewQuestion;","map":{"version":3,"sources":["D:/BearBear/Coding_Projects/UOW-CSIT321 (FYP)/FYP20S313-Mobile/SIM-OpenHouse/src/pages/Forum/ForumViewQuestion.tsx"],"names":["IonContent","IonPage","IonGrid","IonRow","IonSearchbar","IonCol","IonList","IonLabel","IonText","IonHeader","IonLoading","React","useEffect","useState","useParams","FontAwesomeIcon","faClock","faCommentAlt","TopNav","ForumRules","Forum_WithComment","Forum_FlagModal","Forum_AddCommentModal","db","useAuth","ForumViewQuestion","id","uid","userID","loading","setLoading","question","setQuestion","comment","setComment","handlePost","time","Date","name","collection","doc","get","then","data","firstName","lastName","docRef","getTime","toString","set","entry","posterName","posterId","dateTime","toLocaleString","replace","deleted","reported","e","console","log","title","poster","commentCount","noOfComments","removed"],"mappings":"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","sourcesContent":["import { IonContent, IonPage, IonGrid, IonRow, IonSearchbar, IonCol, IonList, IonLabel, IonText, IonHeader, IonLoading } from '@ionic/react';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faClock, faCommentAlt } from '@fortawesome/free-regular-svg-icons';\r\n\r\nimport '../../css/Global.css';\r\nimport '../../css/Forum.css';\r\nimport TopNav from '../../components/TopNav';\r\nimport ForumRules from '../../components/Forum/ForumRules';\r\nimport Forum_WithComment from '../../components/Forum/Forum_WithComment';\r\nimport Forum_FlagModal from '../../components/Forum/Forum_FlagModal';\r\nimport Forum_AddCommentModal from '../../components/Forum/Forum_AddCommentModal';\r\nimport { db } from '../../firebase';\r\nimport { useAuth } from '../../modules/auth';\r\n\r\ninterface RouteParams {\r\n    id: string;\r\n    uid: string;\r\n}\r\n\r\nconst ForumViewQuestion: React.FC = () => {\r\n    const { id, uid } = useParams<RouteParams>();\r\n    const { userID } = useAuth();\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [question, setQuestion] = useState<any>({});\r\n    const [comment, setComment] = useState();\r\n\r\n    const handlePost = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const time = new Date();\r\n            let name: string;\r\n\r\n            await db.collection('Students').doc(userID).get().then((doc: any) => {\r\n                name = doc.data().firstName + \" \" + doc.data().lastName;\r\n            });\r\n\r\n            \r\n            const docRef = db.collection('Forum').doc(userID).collection('Comments').doc((time.getTime()).toString());\r\n            await docRef.set({\r\n                id: +docRef.id,\r\n                entry: comment,\r\n                posterName: name!,\r\n                posterId: userID,\r\n                dateTime: time.toLocaleString().replace(/\\//g, \"-\"),\r\n                deleted: false,\r\n                reported: false\r\n            });\r\n\r\n            /* const increment = firebase.firestore.FieldValue.increment(1);\r\n            await db.collection('Forum').doc(\"\").collection('Questions').doc(\"\").update({\r\n                noOfComments: increment,\r\n            }); */\r\n        } catch (e) {\r\n            return console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n            //setShowPostModal(false);\r\n            //setEntry(\"\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        db.collection('Forum').doc(uid).collection('Questions').doc(id).get().then((entry: any) => {\r\n            setQuestion({\r\n                title: entry.data().entry,\r\n                poster: entry.data().posterName,\r\n                dateTime: entry.data().dateTime,\r\n                commentCount: entry.data().noOfComments,\r\n                removed: entry.data().deleted\r\n            });\r\n        });\r\n\r\n        setLoading(false);\r\n    }, []);\r\n    \r\n    //console.log(question)\r\n    \r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <TopNav title=\"Forum\" route=\"/u/forum\" backarrow={ true } hamburger={ true }/>\r\n            </IonHeader>\r\n            \r\n            <IonContent  fullscreen id=\"forum-content\">\r\n                <IonGrid id=\"forum-searchbar-container\">\r\n                    <IonRow className=\"ion-justify-content-start\">\r\n                        <IonCol size=\"10\" className=\"forum-col\">\r\n                            <IonSearchbar id=\"forum-searchbar\" animated></IonSearchbar>\r\n                        </IonCol>\r\n                        <IonCol size=\"2\" className=\"forum-col ion-align-self-center\">\r\n                            <ForumRules />\r\n                        </IonCol>\r\n                    </IonRow>\r\n                </IonGrid>\r\n                <IonList className=\"forum-container\">\r\n                    <IonGrid>\r\n                        <IonRow>\r\n                            { question.removed === false ? (\r\n                                <IonLabel>\r\n                                    <IonText className=\"forum-question\">{question.title}</IonText>\r\n                                </IonLabel>\r\n                            ) : (\r\n                                <IonLabel>\r\n                                    <IonText className=\"forum-question\">[deleted]</IonText>\r\n                                </IonLabel>\r\n                            ) }\r\n                        </IonRow>\r\n                        <IonRow className=\"ion-justify-content-end\">\r\n                            <IonText className=\"forum-question-details\" id=\"forum-userName\">~ {question.poster}</IonText>\r\n                        </IonRow>\r\n                        <IonRow className=\"ion-align-items-end ion-justify-content-start\" id=\"forum-question-detail-container\">\r\n                            <IonCol size=\"1\" className=\"forum-col ion-align-self-end\">\r\n                                <FontAwesomeIcon icon={faClock} size=\"sm\"/>\r\n                            </IonCol>\r\n                            <IonCol size=\"6\" className=\"forum-col ion-align-self-end\">\r\n                                <IonText className=\"forum-question-details\">{question.dateTime}</IonText>\r\n                            </IonCol>\r\n                            <IonCol size=\"1\" className=\"forum-col ion-align-self-end\">\r\n                                <FontAwesomeIcon icon={faCommentAlt} size=\"sm\"/>\r\n                            </IonCol>\r\n                            <IonCol size=\"3\" className=\"forum-col ion-align-self-end\">\r\n                                <IonText className=\"forum-question-details\">{question.commentCount}</IonText>\r\n                            </IonCol>\r\n                            <IonCol size=\"1\" className=\"ion-align-self-end forum-col\">\r\n                                <Forum_FlagModal />\r\n                            </IonCol>\r\n                        </IonRow>\r\n                    </IonGrid>\r\n                </IonList>\r\n                <IonGrid id=\"add-comment-container\">\r\n                    <IonRow>\r\n                        <IonCol className=\"ion-align-self-center\">\r\n                            <IonText id=\"addComment-commentText\">Comments</IonText>\r\n                        </IonCol>\r\n                        <IonCol className=\"ion-align-self-center\">\r\n                            <Forum_AddCommentModal />\r\n                        </IonCol>\r\n                    </IonRow>\r\n                </IonGrid>\r\n\r\n                {/* When there's no comment */}\r\n                {/* <Forum_NoComment /> */}\r\n\r\n                {/* When there's 2 comments, reply to comment and deleted comment*/}\r\n                <Forum_WithComment />\r\n\r\n                <IonLoading isOpen={loading} />\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n};\r\n\r\nexport default ForumViewQuestion;"]},"metadata":{},"sourceType":"module"}